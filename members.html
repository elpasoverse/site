<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Community Portal | El Paso Verse</title>
    <meta name="title" content="Community Portal | El Paso Verse">
    <meta name="description" content="Welcome, Pioneer. Access exclusive content, earn PASO credits, stream motion prints, and participate in building the frontier. Your gateway to the El Paso Verse community.">
    <meta name="keywords" content="El Paso Verse, community portal, PASO credits, frontier community, member access, Western community">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/paso-token.png">
    <link rel="apple-touch-icon" href="assets/paso-token.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://elpasoverse.com/members.html">
    <meta property="og:title" content="Community Portal | El Paso Verse">
    <meta property="og:description" content="Welcome, Pioneer. Access exclusive content, earn PASO credits, stream motion prints, and participate in building the frontier. Your gateway to the El Paso Verse community.">
    <meta property="og:image" content="https://elpasoverse.com/assets/paso-token.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://elpasoverse.com/members.html">
    <meta property="twitter:title" content="Community Portal | El Paso Verse">
    <meta property="twitter:description" content="Welcome, Pioneer. Access exclusive content, earn PASO credits, and participate in building the frontier.">
    <meta property="twitter:image" content="https://elpasoverse.com/assets/paso-token.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="members.css">
</head>
<body class="members-body">
    <!-- Header -->
    <header class="members-header">
        <div class="header-container">
            <a href="index.html" class="site-title" style="text-decoration: none; color: inherit; cursor: pointer;">El Paso Verse</a>
            <div class="header-actions">
                <a href="index.html" style="color: #C9A961; text-decoration: none; margin-right: 1rem; font-size: 0.95rem; transition: color 0.3s;" onmouseover="this.style.color='#F5E6D3'" onmouseout="this.style.color='#C9A961'">‚Üê Back to Main Site</a>
                <div class="account-dropdown">
                    <button class="account-btn" id="accountBtn">
                        <span class="username" id="usernameDisplay">Pioneer</span>
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"/></svg>
                    </button>
                    <div class="account-menu" id="accountMenu">
                        <button onclick="openAccountSettings()">Account Settings</button>
                        <button onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="members-container">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <h2>Welcome to the Community, Pioneer</h2>
            <div class="ornament-divider"></div>
            <p style="color: #1a1a1a;">You're now part of something that's never been built before‚Äîa real-world destination where lore, film universe and land meet to create one of the most extraordinary experiences on the planet.</p>
        </section>

        <!-- Navigation Tabs -->
        <nav class="tabs-navigation">
            <button class="tab-button active" data-tab="dashboard">Dashboard</button>
            <button class="tab-button" data-tab="exclusive">Exclusive Content</button>
            <button class="tab-button" data-tab="land">Land Targets</button>
            <button class="tab-button" data-tab="team">Development Team</button>
            <button class="tab-button" data-tab="browse">Browse Ideas</button>
            <button class="tab-button" data-tab="submit">Submit Your Idea</button>
            <button class="tab-button" data-tab="activity">My Activity</button>
            <button class="tab-button" data-tab="governance">Governance</button>
        </nav>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-pane active">
                <h3 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #1a1a1a; margin-bottom: 1.5rem;">Your Dashboard</h3>

                <!-- PASO Credits Balance -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 2rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <img src="assets/paso-token.png" alt="PASO Credits" style="width: 60px; height: 60px; object-fit: contain;">
                                <div>
                                    <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.8rem; font-weight: 700; color: #f9f3e3; margin: 0;">Your PASO Balance</h4>
                                    <p style="color: #a89178; font-size: 0.9rem; margin: 0;">Reward Credits of the 1880 Frontier</p>
                                </div>
                            </div>
                            <div style="background: #1a1a1a; border: 2px solid #c9a860; padding: 1.5rem; border-radius: 4px; margin-bottom: 1rem;">
                                <div id="pasoBalance" style="font-size: 3rem; font-weight: 900; color: #c9a860; font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif;">‚Äî</div>
                                <div style="color: #d4c4a8; font-size: 0.9rem; margin-top: 0.5rem;">PASO Credits</div>
                            </div>
                            <p style="color: #d4c4a8; font-size: 0.85rem; line-height: 1.5;">
                                PASO credits are your rewards in the El Paso Verse frontier. Use them to access exclusive content, participate in community voting, and unlock experiences when the physical destination launches.
                            </p>

                            <!-- Balance Info -->
                            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 168, 97, 0.3);">
                                <p style="color: #90ee90; font-size: 0.9rem; margin-bottom: 0.5rem;">
                                    <span style="font-weight: 700;">Your balance loads automatically</span> when you sign in.
                                </p>
                                <p style="color: #a89178; font-size: 0.8rem; margin-top: 0.75rem;">
                                    New members receive <strong style="color: #c9a860;">25 PASO credits</strong> as a welcome bonus.
                                </p>
                            </div>
                        </div>

                        <!-- Credit Utilities Quick Info -->
                        <div style="flex: 1; background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 4px; border-left: 3px solid #c9a860;">
                            <h5 style="color: #c9a860; font-weight: 700; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.85rem;">Credit Benefits by Phase</h5>

                            <!-- Phase 1: ACTIVE -->
                            <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(45, 138, 45, 0.1); border: 2px solid #2d8a2d; border-radius: 4px;">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="background: #2d8a2d; color: #fff; padding: 0.15rem 0.5rem; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.1em; border-radius: 2px;">ACTIVE NOW</span>
                                    <span style="color: #90ee90; font-weight: 700; font-size: 0.85rem;">Phase 1: Pre-Launch</span>
                                </div>
                                <ul style="color: #d0f0d0; font-size: 0.85rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                                    <li>Redeem authentic film frames & collectibles</li>
                                    <li>Access exclusive merchandise</li>
                                    <li>Early access benefits for founding members</li>
                                </ul>
                            </div>

                            <!-- Phase 2: COMING SOON -->
                            <div style="margin-bottom: 1rem; opacity: 0.5;">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="background: #666; color: #999; padding: 0.15rem 0.5rem; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.1em; border-radius: 2px;">COMING SOON</span>
                                    <span style="color: #999; font-weight: 700; font-size: 0.85rem;">Phase 2: Marketing Stage</span>
                                </div>
                                <ul style="color: #888; font-size: 0.85rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                                    <li>El Paso Pass subscription</li>
                                    <li>Stream motion pictures</li>
                                    <li>BTS content & commentary</li>
                                </ul>
                            </div>

                            <!-- Phase 3: COMING SOON -->
                            <div style="opacity: 0.5;">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="background: #666; color: #999; padding: 0.15rem 0.5rem; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.1em; border-radius: 2px;">COMING SOON</span>
                                    <span style="color: #999; font-weight: 700; font-size: 0.85rem;">Phase 3: Land Launch</span>
                                </div>
                                <ul style="color: #888; font-size: 0.85rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                                    <li>Required currency to enter the physical destination</li>
                                    <li>Run businesses in authentic 1880s frontier towns</li>
                                    <li>Trade goods & services in the Old West economy</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Earning Opportunities -->
                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(201, 168, 97, 0.3);">
                        <h5 style="color: #c9a860; font-weight: 700; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.85rem;">Ways to Earn PASO Credits</h5>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="background: rgba(139, 69, 19, 0.2); padding: 1rem; border-radius: 4px; border: 2px solid rgba(201, 169, 97, 0.5); position: relative;">
                                <span style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2d8a2d; color: white; font-size: 0.65rem; font-weight: 700; padding: 0.2rem 0.5rem; border-radius: 3px; text-transform: uppercase; letter-spacing: 0.05em;">Active</span>
                                <div style="color: #f9f3e3; font-weight: 700; margin-bottom: 0.25rem;">Community Missions</div>
                                <div style="color: #c9a860; font-size: 0.85rem;">Complete tasks and challenges</div>
                            </div>
                            <a href="film-the-visionary.html#cast-crew" style="text-decoration: none; background: rgba(139, 69, 19, 0.2); padding: 1rem; border-radius: 4px; border: 2px solid rgba(201, 169, 97, 0.5); position: relative; display: block; transition: all 0.3s ease; cursor: pointer;">
                                <span style="position: absolute; top: 0.5rem; right: 0.5rem; background: #2d8a2d; color: white; font-size: 0.65rem; font-weight: 700; padding: 0.2rem 0.5rem; border-radius: 3px; text-transform: uppercase; letter-spacing: 0.05em;">Active</span>
                                <div style="color: #f9f3e3; font-weight: 700; margin-bottom: 0.25rem;">Volunteer Work ‚Üí</div>
                                <div style="color: #c9a860; font-size: 0.85rem;">Production crew & on-set roles</div>
                            </a>
                            <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 4px;">
                                <div style="color: #f9f3e3; font-weight: 700; margin-bottom: 0.25rem;">Hold Film Collectibles</div>
                                <div style="color: #a89178; font-size: 0.85rem;">Periodic credit rewards for collection holders</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 4px;">
                                <div style="color: #f9f3e3; font-weight: 700; margin-bottom: 0.25rem;">Purchase Credits</div>
                                <div style="color: #a89178; font-size: 0.85rem;">Buy PASO credits from the community</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- El Paso Pass Status -->
                <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%); border: 2px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div class="exclusive-content-flex" style="display: flex; align-items: flex-start; gap: 2rem; flex-wrap: wrap;">
                        <div style="font-size: 3rem;">üéüÔ∏è</div>
                        <div style="flex: 1;">
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.8rem; font-weight: 700; color: #f9f3e3; margin-bottom: 0.5rem;">El Paso Pass</h4>
                            <p style="color: #a89178; font-size: 0.9rem; margin-bottom: 1.5rem;">Your ticket to exclusive frontier experiences and early access</p>

                            <div id="elPasoPassStatus" style="margin-bottom: 1.5rem;">
                                <!-- Status will be injected by JS -->
                                <div style="background: rgba(0,0,0,0.4); border-left: 3px solid #8a2d2d; padding: 1rem; border-radius: 4px;">
                                    <div style="color: #ff9090; font-weight: 700; margin-bottom: 0.5rem;">‚ö† Pass Inactive</div>
                                    <div style="color: #d4c4a8; font-size: 0.9rem;">Verify your collectibles or acquire PASO to activate your El Paso Pass</div>
                                </div>
                            </div>

                            <!-- Pass Benefits -->
                            <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 4px;">
                                <h5 style="color: #c9a860; font-weight: 700; margin-bottom: 1rem; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.1em;">Pass Benefits Include:</h5>
                                <ul style="color: #d4c4a8; font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 1.2rem;">
                                    <li>Early access to El Paso Verse films before public release</li>
                                    <li>Streaming access to motion pictures and exclusive content</li>
                                    <li>Behind-the-scenes footage, interviews, and director's commentary</li>
                                    <li>Priority invitations to in-person roadshow screenings and frontier events</li>
                                    <li>Early notification when the physical destination opens</li>
                                    <li>5% additional PASO rewards (stackable with Genesis Collection)</li>
                                </ul>
                            </div>

                            <!-- Qualification Methods -->
                            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(201, 168, 97, 0.1); border-radius: 4px; border: 1px solid rgba(201, 168, 97, 0.3);">
                                <p style="color: #e8dcc8; font-size: 0.85rem; margin: 0;"><strong>How to Activate:</strong> Own a Genesis Collection film frame OR maintain a qualifying PASO balance.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Badge System -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.8rem; font-weight: 700; color: #f9f3e3; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">
                        <span style="font-size: 2rem;">üèÖ</span>
                        Your Badges & Recognition
                    </h4>

                    <div id="userBadges" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- Genesis Ranger Badge -->
                        <div style="background: rgba(0,0,0,0.3); border: 2px solid #4a4a4a; padding: 1.5rem; border-radius: 8px; opacity: 0.6;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="font-size: 3rem; filter: grayscale(100%);">‚≠ê</div>
                                <div>
                                    <div style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #999;">Genesis Ranger</div>
                                    <div style="color: #666; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">LOCKED</div>
                                </div>
                            </div>
                            <div style="color: #999; font-size: 0.85rem; line-height: 1.5; margin-bottom: 1rem;">
                                The highest-tier status for founding members of the El Paso Verse frontier community.
                            </div>
                            <div style="border-top: 1px solid #333; padding-top: 1rem;">
                                <div style="color: #888; font-size: 0.8rem; font-weight: 700; margin-bottom: 0.5rem;">REQUIRES:</div>
                                <div style="color: #999; font-size: 0.85rem;">Full Genesis Collection + Motion Print Collection + X PASO</div>
                                <div style="color: #888; font-size: 0.8rem; font-weight: 700; margin-top: 1rem; margin-bottom: 0.5rem;">BENEFITS:</div>
                                <ul style="color: #999; font-size: 0.8rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                                    <li>Highest-tier physical land access (30% discount when destination opens)</li>
                                    <li>Opportunity to be featured in film productions</li>
                                    <li>Full voting rights on frontier development</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Exclusive Screener Badge -->
                        <div style="background: rgba(0,0,0,0.3); border: 2px solid #4a4a4a; padding: 1.5rem; border-radius: 8px; opacity: 0.6;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="font-size: 3rem; filter: grayscale(100%);">üé¨</div>
                                <div>
                                    <div style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #999;">Exclusive Screener</div>
                                    <div style="color: #666; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">LOCKED</div>
                                </div>
                            </div>
                            <div style="color: #999; font-size: 0.85rem; line-height: 1.5; margin-bottom: 1rem;">
                                Access to exclusive cinematic experiences and early film screenings.
                            </div>
                            <div style="border-top: 1px solid #333; padding-top: 1rem;">
                                <div style="color: #888; font-size: 0.8rem; font-weight: 700; margin-bottom: 0.5rem;">REQUIRES:</div>
                                <div style="color: #999; font-size: 0.85rem;">Motion Prints + X PASO</div>
                                <div style="color: #888; font-size: 0.8rem; font-weight: 700; margin-top: 1rem; margin-bottom: 0.5rem;">BENEFITS:</div>
                                <ul style="color: #999; font-size: 0.8rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                                    <li>Required for physical land purchases (10% discount when available)</li>
                                    <li>Exclusive access to in-person cinematic experiences</li>
                                    <li>Priority invitations to film premieres and screenings</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Director's Cut Collector Badge -->
                        <div style="background: rgba(0,0,0,0.3); border: 2px solid #4a4a4a; padding: 1.5rem; border-radius: 8px; opacity: 0.6;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="font-size: 3rem; filter: grayscale(100%);">üéûÔ∏è</div>
                                <div>
                                    <div style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #999;">Director's Cut Collector</div>
                                    <div style="color: #666; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">LOCKED</div>
                                </div>
                            </div>
                            <div style="color: #999; font-size: 0.85rem; line-height: 1.5; margin-bottom: 1rem;">
                                Elite status for collectors of physical Director's Cut film reels.
                            </div>
                            <div style="border-top: 1px solid #333; padding-top: 1rem;">
                                <div style="color: #888; font-size: 0.8rem; font-weight: 700; margin-bottom: 0.5rem;">REQUIRES:</div>
                                <div style="color: #999; font-size: 0.85rem;">Director's Cut Physical Reel(s)</div>
                                <div style="color: #888; font-size: 0.8rem; font-weight: 700; margin-top: 1rem; margin-bottom: 0.5rem;">BENEFITS:</div>
                                <ul style="color: #999; font-size: 0.8rem; line-height: 1.6; margin: 0; padding-left: 1.2rem;">
                                    <li>Access to rare cinematic content</li>
                                    <li>Priority on future collectibles</li>
                                    <li>Holding previous reels unlocks future rewards</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(201, 168, 97, 0.1); border-radius: 4px; border: 1px solid rgba(201, 168, 97, 0.3);">
                        <p style="color: #e8dcc8; font-size: 0.85rem; margin: 0;"><strong>üí° Tip:</strong> Verify ownership of Genesis Collection film frames or Motion Prints to unlock badges and exclusive access to frontier experiences.</p>
                    </div>
                </div>

                <!-- Verify Collectibles & Advanced Options -->
                <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%); border: 2px solid #c9a860; padding: 2rem; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="font-size: 2.5rem;">üé¨</div>
                        <div style="flex: 1;">
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.5rem; font-weight: 700; color: #f9f3e3; margin-bottom: 0.5rem;">Verify Your Collectibles</h4>
                            <p style="color: #d4c4a8; margin: 0;">Verify ownership of your Genesis Collection film frames to unlock exclusive behind-the-scenes content and early access to future experiences.</p>
                        </div>
                    </div>

                    <div id="walletInfo" style="display: none;"></div>
                    <div id="nftStatus"></div>

                    <div style="margin-top: 1.5rem;">
                        <button id="verifyCollectiblesBtn" onclick="showWalletSelector()" style="background: #c9a860; color: #1a1a1a; padding: 1rem 2rem; font-weight: 700; border: none; border-radius: 4px; cursor: pointer; transition: all 0.3s ease; letter-spacing: 0.05em; font-size: 0.95rem;">
                            Verify Collectibles
                        </button>
                    </div>

                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 168, 97, 0.3);">
                        <p style="color: #a89178; font-size: 0.85rem; margin-bottom: 0.5rem;"><strong>What is the Genesis Collection?</strong></p>
                        <p style="color: #a89178; font-size: 0.85rem; line-height: 1.5;">
                            Genesis Collection holders own authentic film frames from El Paso Verse productions‚Äîshot on Kodak motion picture stock. These 1-of-1 collectibles grant access to exclusive content, streaming privileges, and priority access to real-world events and land opportunities. Available on <a href="https://book.io/series/el-paso-verse/" target="_blank" style="color: #c9a860; text-decoration: underline;">Book.io</a>.
                        </p>
                    </div>

                    <!-- Advanced: Withdraw to External Wallet -->
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 168, 97, 0.2);">
                        <details style="cursor: pointer;">
                            <summary style="color: #666; font-size: 0.8rem; outline: none; user-select: none;">Advanced Options</summary>
                            <div style="margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 4px;">
                                <p style="color: #a89178; font-size: 0.85rem; margin-bottom: 1rem;">
                                    <strong>Withdraw to External Wallet</strong><br>
                                    For users with Cardano wallets, you can withdraw your PASO credits to an external wallet at a 1:1 ratio. This converts your credits to on-chain PASO tokens.
                                </p>
                                <button onclick="showWithdrawModal()" style="background: transparent; border: 1px solid #666; color: #999; padding: 0.5rem 1rem; font-size: 0.85rem; cursor: pointer; border-radius: 4px; transition: all 0.3s;">
                                    Withdraw to Wallet
                                </button>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- Exclusive Content Tab -->
            <div id="exclusive-tab" class="tab-pane">
                <h3>Exclusive Content</h3>
                <p>Members-only frontier updates, cinematic previews, and behind-the-scenes access.</p>

                <!-- Featured: The El Paso Gazette -->
                <div class="exclusive-content-box" style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div class="exclusive-content-flex" style="display: flex; align-items: flex-start; gap: 2rem; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 280px;">
                            <div style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 0.75rem;">EXCLUSIVE</div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #f9f3e3; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">The El Paso Gazette</h4>
                            <p style="color: #d4c4a8; font-style: italic; margin-bottom: 1rem; font-size: 1.1rem;">Vol. I ‚Äî No. 1 ‚Ä¢ January 30, 1880</p>
                            <p style="color: #e8dcc8; line-height: 1.6; margin-bottom: 1.5rem;">
                                Take your first step into 1880 and experience the birth of Breakwater as it's happening with frontier journalism. Read exclusive dispatches about H. West's land petition, railroad scouts on the eastern ridge, and the mysterious lights reported on the northern plain.
                            </p>
                            <div style="margin-bottom: 1rem;">
                                <div id="gazetteRequirementBox" style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(0,0,0,0.3); border: 1px solid rgba(201, 168, 97, 0.5); padding: 0.75rem 1rem; border-radius: 6px;">
                                    <img src="assets/paso-token.png" alt="PASO" style="width: 24px; height: 24px;">
                                    <span id="gazetteRequirementText" style="color: #c9a860; font-size: 0.9rem;"><strong>20 PASO</strong> required ¬∑ Otherwise $2.99 USD</span>
                                    <button id="gazetteBuyBtn" onclick="purchaseGazette()" style="display: none; background: #c9a860; color: #1a1a1a; border: none; padding: 0.5rem 1rem; font-weight: 700; font-size: 0.8rem; border-radius: 4px; cursor: pointer; margin-left: 0.5rem;">ADD TO CART ‚Äî $2.99</button>
                                </div>
                            </div>
                            <a id="gazetteReadBtn" href="gazette-v2.html" style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 1rem 2rem; font-weight: 700; text-decoration: none; border-radius: 4px; transition: all 0.3s ease; letter-spacing: 0.05em; font-size: 0.95rem;">
                                READ THE GAZETTE ‚Üí
                            </a>
                        </div>
                        <div style="flex: 0 0 280px; text-align: center; margin: 0 auto;">
                            <img src="assets/gazette-preview-thumb.png" alt="The El Paso Gazette Preview" style="width: 100%; max-width: 280px; height: auto; border: 3px solid #1a1a1a; transform: rotate(-1deg); box-shadow: 0 8px 20px rgba(0,0,0,0.4); cursor: pointer;" onclick="window.location.href='gazette-v2.html'">
                        </div>
                    </div>
                </div>

                <!-- Community Music -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div class="exclusive-content-flex" style="display: flex; align-items: flex-start; gap: 2rem; flex-wrap: wrap;">
                        <div style="flex: 1;">
                            <div style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 0.75rem;">EXCLUSIVE</div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #f9f3e3; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Collectible Frontier Albums</h4>
                            <p style="color: #e8dcc8; line-height: 1.6; margin-bottom: 1.5rem;">
                                Original music by the community, capturing the spirit of the 1880 frontier. <span style="color: #c9a860;">Upcoming: Official soundtrack albums from El Paso Verse films.</span>
                            </p>

                            <!-- Vol. I Album with Music Player -->
                            <div style="background: rgba(0,0,0,0.3); border: 2px solid #c9a860; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                                <div style="display: flex; align-items: flex-start; gap: 1.5rem; margin-bottom: 1.25rem;">
                                    <img src="assets/album-vol1-cover.webp" alt="Vol. I Album Cover" style="width: 140px; height: 140px; object-fit: cover; border-radius: 4px; border: 2px solid #c9a860; flex-shrink: 0;">
                                    <div style="flex: 1;">
                                        <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                                            <span style="background: #8B4513; color: #f9f3e3; padding: 0.2rem 0.6rem; font-size: 0.7rem; font-weight: 700; letter-spacing: 0.1em; border-radius: 3px;">LP VINYL</span>
                                            <span style="background: #c9a860; color: #1a1a1a; padding: 0.2rem 0.6rem; font-size: 0.7rem; font-weight: 700; letter-spacing: 0.1em; border-radius: 3px;">PRE-ORDER</span>
                                        </div>
                                        <h5 style="color: #f9f3e3; font-size: 1.3rem; font-weight: 700; margin: 0 0 0.5rem 0;">Vol. I ‚Äî El Paso Verse Frontier</h5>
                                        <p style="color: #d4c4a8; font-size: 0.85rem; margin: 0 0 1rem 0; line-height: 1.5;">Limited edition LP vinyl record featuring the complete collection of Frontier soundtracks used during early community development. Featuring original music by avant-garde composers such as Kitosch Keller, Michael J. Smith and Jed Smith, and more. A collector's piece for true pioneers. Final artwork and track selection will likely differ, subject to upcoming community votes. Proceeds after costs, are shared between contributing artists and production team.</p>
                                        <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                                            <div style="color: #f9f3e3; font-size: 1.5rem; font-weight: 700;">$39 <span style="font-size: 0.85rem; font-weight: 400; color: #d4c4a8;">USD</span></div>
                                            <button onclick="preorderVinyl()" style="background: #c9a860; color: #1a1a1a; border: none; padding: 0.6rem 1.25rem; font-weight: 700; font-size: 0.85rem; border-radius: 4px; cursor: pointer; transition: all 0.3s ease;">PRE-ORDER NOW</button>
                                            <div style="color: #c9a860; font-size: 0.75rem; margin-top: 0.5rem; font-style: italic;">Limited edition supply</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Music Player (Compact) -->
                                <div id="pasoRequirementBox" style="background: rgba(0,0,0,0.3); border: 1px solid rgba(201, 168, 97, 0.5); padding: 0.6rem 1rem; border-radius: 6px; margin-bottom: 0.75rem; display: inline-flex; align-items: center; gap: 0.75rem;">
                                    <img src="assets/paso-token.png" alt="PASO" style="width: 20px; height: 20px;">
                                    <span id="pasoRequirementText" style="color: #c9a860; font-size: 0.8rem;"><strong>5 PASO</strong> required to sample tracks</span>
                                </div>
                                <div id="musicPlayerPortal" style="background: rgba(0,0,0,0.3); border: 1px solid rgba(201, 168, 97, 0.5); padding: 0.75rem 1rem; border-radius: 6px; display: flex; align-items: center; gap: 1rem;">
                                    <button class="music-toggle-portal" id="musicTogglePortal" title="Play Music" style="background: #c9a860; border: none; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; flex-shrink: 0;">
                                        <svg class="play-icon-portal" viewBox="0 0 24 24" fill="#1a1a1a" style="width: 18px; height: 18px;"><path d="M8 5v14l11-7z"/></svg>
                                        <svg class="pause-icon-portal" viewBox="0 0 24 24" fill="#1a1a1a" style="width: 18px; height: 18px; display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                                    </button>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
                                            <div id="musicTrackPortal" style="color: #f9f3e3; font-size: 0.9rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex: 1;">Frontier Music</div>
                                            <span id="trackTimePortal" style="color: #c9a860; font-size: 0.7rem; flex-shrink: 0;">0:00 / 0:00</span>
                                        </div>
                                        <div id="musicArtistPortal" style="color: #c9a860; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;">Artist</div>
                                        <!-- Progress Bar -->
                                        <div id="progressBarContainer" style="width: 100%; height: 4px; background: rgba(201, 168, 97, 0.3); border-radius: 2px; cursor: pointer; position: relative;">
                                            <div id="progressBarFill" style="width: 0%; height: 100%; background: #c9a860; border-radius: 2px; transition: width 0.1s linear;"></div>
                                            <div id="progressBarHandle" style="position: absolute; top: 50%; transform: translate(-50%, -50%); width: 10px; height: 10px; background: #f9f3e3; border-radius: 50%; left: 0%; opacity: 0; transition: opacity 0.2s;"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 0.35rem; flex-shrink: 0;">
                                        <button id="musicPrevPortal" title="Previous" style="background: transparent; border: 1px solid #c9a860; color: #c9a860; width: 28px; height: 28px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                                            <svg viewBox="0 0 24 24" fill="currentColor" style="width: 14px; height: 14px;"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                                        </button>
                                        <button id="musicNextPortal" title="Next" style="background: transparent; border: 1px solid #c9a860; color: #c9a860; width: 28px; height: 28px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                                            <svg viewBox="0 0 24 24" fill="currentColor" style="width: 14px; height: 14px;"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                                        </button>
                                    </div>
                                    <div style="color: #c9a860; font-size: 0.75rem; flex-shrink: 0;">8 tracks</div>
                                </div>
                            </div>
                            <div id="trackListPortal" style="display: none;"></div>
                        </div>
                    </div>
                </div>

                <!-- Motion Print Streaming -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div class="exclusive-content-flex" style="display: flex; align-items: flex-start; gap: 2rem; flex-wrap: wrap;">
                        <div style="flex: 1;">
                            <div style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 0.75rem;">EXCLUSIVE</div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #f9f3e3; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Motion Print Screening Room</h4>
                            <p style="color: #d4c4a8; font-style: italic; margin-bottom: 1rem; font-size: 1.1rem;">Exclusive Film Frame Collection</p>
                            <p style="color: #e8dcc8; line-height: 1.6; margin-bottom: 1.5rem;">
                                Stream our exclusive Motion Print collection in the closed El Paso Verse screening room - before the films go to the public. Each frame is a one-of-one piece of cinematic art, shot on authentic Kodak motion picture film stock.
                            </p>
                            <div style="margin-bottom: 1rem;">
                                <div id="motionPrintRequirementBox" style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(0,0,0,0.3); border: 1px solid rgba(201, 168, 97, 0.5); padding: 0.75rem 1rem; border-radius: 6px;">
                                    <img src="assets/paso-token.png" alt="PASO" style="width: 24px; height: 24px;">
                                    <span id="motionPrintRequirementText" style="color: #c9a860; font-size: 0.9rem;"><strong>300 PASO</strong> + Genesis Collection required ¬∑ Otherwise $49 USD</span>
                                    <button id="motionPrintBuyBtn" onclick="purchaseMotionPrint()" style="display: none; background: #c9a860; color: #1a1a1a; border: none; padding: 0.5rem 1rem; font-weight: 700; font-size: 0.8rem; border-radius: 4px; cursor: pointer; margin-left: 0.5rem;">ADD TO CART ‚Äî $49</button>
                                </div>
                            </div>
                            <button id="motionPrintStreamBtn" onclick="accessMotionPrint()" style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 1rem 2rem; font-weight: 700; border: none; border-radius: 4px; cursor: pointer; transition: all 0.3s ease; letter-spacing: 0.05em; font-size: 0.95rem;">
                                STREAM MOTION PRINT ‚Üí
                            </button>
                        </div>
                        <div style="flex: 0 0 320px; text-align: center;">
                            <div style="background: #000; border: 3px solid #1a1a1a; transform: rotate(-1deg); box-shadow: 0 8px 20px rgba(0,0,0,0.4); position: relative; overflow: hidden;">
                                <img src="assets/frame-1.png" alt="Motion Print Preview" style="width: 100%; height: auto; display: block;">
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.7); padding: 1rem; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center;">
                                    <div style="width: 0; height: 0; border-style: solid; border-width: 12px 0 12px 20px; border-color: transparent transparent transparent #f9f3e3; margin-left: 4px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VisionPaper -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div class="exclusive-content-flex" style="display: flex; align-items: flex-start; gap: 2rem; flex-wrap: wrap;">
                        <div style="flex: 1;">
                            <div style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 0.75rem;">FOUNDATIONAL</div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #f9f3e3; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Own The VisionPaper</h4>
                            <p style="color: #d4c4a8; font-style: italic; margin-bottom: 1rem; font-size: 1.1rem;">By Harrison West ‚Ä¢ 3,000 Numbered Editions</p>
                            <p style="color: #e8dcc8; line-height: 1.6; margin-bottom: 1.5rem;">
                                The foundational blueprint for the El Paso Verse ‚Äî an immersive ecosystem designed to unite a global community in bringing to life a groundbreaking physical destination permanently set in 1880. More than documentation, it's a blueprint carved in dust, mesquite, and cinematic fire.
                            </p>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem;">
                                <span style="background: rgba(201, 168, 97, 0.2); color: #c9a860; padding: 0.3rem 0.6rem; font-size: 0.75rem; border-radius: 4px;">409 Unique Covers</span>
                                <span style="background: rgba(201, 168, 97, 0.2); color: #c9a860; padding: 0.3rem 0.6rem; font-size: 0.75rem; border-radius: 4px;">241 One-of-One Editions</span>
                                <span style="background: rgba(201, 168, 97, 0.2); color: #c9a860; padding: 0.3rem 0.6rem; font-size: 0.75rem; border-radius: 4px;">4K Artwork Included</span>
                            </div>
                            <a href="https://book.io/book/the-el-paso-verse-visionpaper-v1-7/" target="_blank" style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 1rem 2rem; font-weight: 700; text-decoration: none; border-radius: 4px; transition: all 0.3s ease; letter-spacing: 0.05em; font-size: 0.95rem;">
                                VIEW AND BUY ON BOOK.IO ‚Üí
                            </a>
                        </div>
                        <div style="flex: 0 0 280px; text-align: center;">
                            <img src="assets/visionpaper-cover.png" alt="The VisionPaper Cover" style="width: 100%; height: auto; border: 3px solid #1a1a1a; transform: rotate(1deg); box-shadow: 0 8px 20px rgba(0,0,0,0.4); cursor: pointer;" onclick="window.open('https://book.io/book/the-el-paso-verse-visionpaper-v1-7/', '_blank')">
                        </div>
                    </div>
                </div>

                <div id="exclusiveContent" class="exclusive-grid">
                    <div class="loading-message">Loading exclusive content...</div>
                </div>
            </div>

            <!-- Land Targets Tab -->
            <div id="land-tab" class="tab-pane">
                <h3 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #3A2820; margin-bottom: 1rem;">Land Acquisition Targets</h3>
                <p style="color: #1a1a1a; margin-bottom: 2rem; line-height: 1.8;">The community is exploring three Real World Asset (RWA) acquisition targets for the El Paso Verse physical destination. Review each option and cast your vote to help shape where the frontier takes root.</p>

                <!-- Voting Instructions -->
                <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 1.5rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 2rem;">üó∫Ô∏è</div>
                        <div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.4rem; font-weight: 700; color: #3A2820; margin: 0;">Community-Led Land Race</h4>
                            <p style="color: #1a1a1a; font-size: 0.9rem; margin: 0.5rem 0 0 0;">Your vote helps determine which land target we pursue first</p>
                        </div>
                    </div>
                    <p style="color: #1a1a1a; font-size: 0.95rem; line-height: 1.7; margin: 0;">
                        These targets represent potential locations for the physical El Paso Verse destination. Each offers unique advantages for our community. Vote for the target you believe best serves the vision outlined in the VisionPaper.
                    </p>
                </div>

                <!-- Land Target Cards -->
                <div class="land-carousel-wrapper">
                    <button class="land-carousel-prev" onclick="moveLandCarousel(-1)" aria-label="Previous land target">‚Äπ</button>
                    <button class="land-carousel-next" onclick="moveLandCarousel(1)" aria-label="Next land target">‚Ä∫</button>
                    <div class="land-targets-grid">

                        <!-- Target 1: Verse Hotel -->
                    <div class="land-target-card" data-target="verse-hotel">
                        <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #C9A961; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; height: 100%;">
                            <div style="background: #1a1a1a; padding: 1.5rem; border-bottom: 2px solid #C9A961;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div>
                                        <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.6rem; font-weight: 700; color: #F5E6D3; margin: 0 0 0.5rem 0;">Verse Hotel</h4>
                                        <p style="color: #C9A961; font-size: 0.9rem; margin: 0;">üìç Almeria, Spain</p>
                                    </div>
                                    <span style="background: #C9A961; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; border-radius: 4px; letter-spacing: 0.05em; white-space: nowrap;">HOTEL & CAMP</span>
                                </div>
                                <p style="color: #EDD9C0; font-size: 0.95rem; line-height: 1.6; margin: 0; min-height: 3em;">Community Hotel & Camp in Spain</p>
                            </div>

                            <!-- Reference Photo -->
                            <div style="height: 200px; overflow: hidden; background: #1a1a1a;">
                                <img src="assets/verse-hotel-reference.png" alt="Verse Hotel" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.8;">
                            </div>

                            <div style="padding: 1.5rem; flex: 1; display: flex; flex-direction: column;">
                                <h5 style="color: #C9A961; font-size: 0.85rem; font-weight: 700; margin: 0 0 1rem 0; letter-spacing: 0.1em; text-transform: uppercase;">Target Details</h5>
                                <ul style="color: #EDD9C0; font-size: 0.9rem; line-height: 1.8; margin: 0 0 auto 0; padding-left: 1.2rem; min-height: 180px;">
                                    <li>21-room boutique hotel with spa</li>
                                    <li>Natural hot spring facilities</li>
                                    <li>244,084 m¬≤ land for expansion</li>
                                    <li>Film screening cinema venue</li>
                                </ul>

                                <!-- Share Buttons -->
                                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(201, 169, 97, 0.2);">
                                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                                        <span style="color: #C9A961; font-size: 0.8rem; font-weight: 600;">Share:</span>
                                        <button onclick="shareOnX('verse-hotel')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            X
                                        </button>
                                        <button onclick="shareOnFacebook('verse-hotel')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            Facebook
                                        </button>
                                        <button onclick="copyShareLink('verse-hotel')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            Copy Link
                                        </button>
                                    </div>
                                </div>

                                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 4px;">
                                    <div style="color: #C9A961; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.5rem;">Acquisition Details</div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Current Owner:</span>
                                        <span style="color: #F5E6D3; font-size: 0.85rem; font-weight: 600;">Private</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Asking:</span>
                                        <span style="color: #D4A745; font-size: 0.85rem; font-weight: 700;">4 million EUR</span>
                                    </div>
                                </div>

                                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 169, 97, 0.3);">
                                    <div style="margin-bottom: 1rem;">
                                        <a href="https://elpasoverse.webflow.io/land-growth/verse-hotel-almeria" target="_blank" style="color: #C9A961; font-size: 0.85rem; text-decoration: underline;">View Detailed Information ‚Üí</a>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Community Support</span>
                                        <span class="vote-count" style="color: #C9A961; font-weight: 700;">0 votes</span>
                                    </div>
                                    <button class="land-vote-btn" data-target="verse-hotel" style="width: 100%; padding: 0.75rem; background: linear-gradient(135deg, #C9A961 0%, #D4A745 100%); color: #1a1a1a; border: none; border-radius: 4px; font-weight: 700; font-size: 0.95rem; cursor: pointer; transition: all 0.3s;">
                                        Vote for This Target
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Target 2: Western Leone -->
                    <div class="land-target-card" data-target="western-leone">
                        <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #C9A961; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; height: 100%;">
                            <div style="background: #1a1a1a; padding: 1.5rem; border-bottom: 2px solid #C9A961;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div>
                                        <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.6rem; font-weight: 700; color: #F5E6D3; margin: 0 0 0.5rem 0;">Western Leone</h4>
                                        <p style="color: #C9A961; font-size: 0.9rem; margin: 0;">üìç Almeria, Spain</p>
                                    </div>
                                    <span style="background: #D4A745; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; border-radius: 4px; letter-spacing: 0.05em; white-space: nowrap;">LVL 1</span>
                                </div>
                                <p style="color: #EDD9C0; font-size: 0.95rem; line-height: 1.6; margin: 0; min-height: 3em;">A Filming Hub & Level 1 Development</p>
                            </div>

                            <!-- Reference Photo -->
                            <div style="height: 200px; overflow: hidden; background: #1a1a1a;">
                                <img src="assets/western-leone-reference.png" alt="Western Leone" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.8;">
                            </div>

                            <div style="padding: 1.5rem; flex: 1; display: flex; flex-direction: column;">
                                <h5 style="color: #C9A961; font-size: 0.85rem; font-weight: 700; margin: 0 0 1rem 0; letter-spacing: 0.1em; text-transform: uppercase;">Target Details</h5>
                                <ul style="color: #EDD9C0; font-size: 0.9rem; line-height: 1.8; margin: 0 0 auto 0; padding-left: 1.2rem; min-height: 180px;">
                                    <li>Historic Sergio Leone film set</li>
                                    <li>Tabernas Desert location</li>
                                    <li>Authentic Western town structures</li>
                                    <li>Professional filming hub</li>
                                </ul>

                                <!-- Share Buttons -->
                                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(201, 169, 97, 0.2);">
                                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                                        <span style="color: #C9A961; font-size: 0.8rem; font-weight: 600;">Share:</span>
                                        <button onclick="shareOnX('western-leone')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            X
                                        </button>
                                        <button onclick="shareOnFacebook('western-leone')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            Facebook
                                        </button>
                                        <button onclick="copyShareLink('western-leone')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            Copy Link
                                        </button>
                                    </div>
                                </div>

                                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 4px;">
                                    <div style="color: #C9A961; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.5rem;">Acquisition Details</div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Current Owner:</span>
                                        <span style="color: #F5E6D3; font-size: 0.85rem; font-weight: 600;">Private</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Asking:</span>
                                        <span style="color: #D4A745; font-size: 0.85rem; font-weight: 700;">2 million EUR</span>
                                    </div>
                                </div>

                                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 169, 97, 0.3);">
                                    <div style="margin-bottom: 1rem;">
                                        <a href="https://elpasoverse.webflow.io/land-growth/western-leone-almeria" target="_blank" style="color: #C9A961; font-size: 0.85rem; text-decoration: underline;">View Detailed Information ‚Üí</a>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Community Support</span>
                                        <span class="vote-count" style="color: #C9A961; font-weight: 700;">0 votes</span>
                                    </div>
                                    <button class="land-vote-btn" data-target="western-leone" style="width: 100%; padding: 0.75rem; background: linear-gradient(135deg, #C9A961 0%, #D4A745 100%); color: #1a1a1a; border: none; border-radius: 4px; font-weight: 700; font-size: 0.95rem; cursor: pointer; transition: all 0.3s;">
                                        Vote for This Target
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Target 3: Rio Texaco -->
                    <div class="land-target-card" data-target="rio-texaco">
                        <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #C9A961; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; height: 100%;">
                            <div style="background: #1a1a1a; padding: 1.5rem; border-bottom: 2px solid #C9A961;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div>
                                        <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.6rem; font-weight: 700; color: #F5E6D3; margin: 0 0 0.5rem 0;">Rio Texaco</h4>
                                        <p style="color: #C9A961; font-size: 0.9rem; margin: 0;">üìç Big Bend, Texas</p>
                                    </div>
                                    <span style="background: linear-gradient(135deg, #D4A745 0%, #C9A961 100%); color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.75rem; font-weight: 700; border-radius: 4px; letter-spacing: 0.05em; white-space: nowrap;">FULL VISION</span>
                                </div>
                                <p style="color: #EDD9C0; font-size: 0.95rem; line-height: 1.6; margin: 0; min-height: 3em;">Land for the Full Vision: Level 1 - 3</p>
                            </div>

                            <!-- Reference Photo -->
                            <div style="height: 200px; overflow: hidden; background: #1a1a1a;">
                                <img src="assets/rio-texaco-reference.png" alt="Rio Texaco" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.8;">
                            </div>

                            <div style="padding: 1.5rem; flex: 1; display: flex; flex-direction: column;">
                                <h5 style="color: #C9A961; font-size: 0.85rem; font-weight: 700; margin: 0 0 1rem 0; letter-spacing: 0.1em; text-transform: uppercase;">Target Details</h5>
                                <ul style="color: #EDD9C0; font-size: 0.9rem; line-height: 1.8; margin: 0 0 auto 0; padding-left: 1.2rem; min-height: 180px;">
                                    <li>90,000 acres of Texas borderland</li>
                                    <li>5 miles of Rio Grande riverfront</li>
                                    <li>Ultimate frontier destination</li>
                                    <li>Multiple towns and full immersion</li>
                                </ul>

                                <!-- Share Buttons -->
                                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(201, 169, 97, 0.2);">
                                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                                        <span style="color: #C9A961; font-size: 0.8rem; font-weight: 600;">Share:</span>
                                        <button onclick="shareOnX('rio-texaco')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            X
                                        </button>
                                        <button onclick="shareOnFacebook('rio-texaco')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            Facebook
                                        </button>
                                        <button onclick="copyShareLink('rio-texaco')" style="background: none; border: 2px solid #C9A961; color: #C9A961; padding: 0.4rem 0.75rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#C9A961'; this.style.color='#1a1a1a'" onmouseout="this.style.background='none'; this.style.color='#C9A961'">
                                            Copy Link
                                        </button>
                                    </div>
                                </div>

                                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 4px;">
                                    <div style="color: #C9A961; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.5rem;">Acquisition Details</div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Current Owner:</span>
                                        <span style="color: #F5E6D3; font-size: 0.85rem; font-weight: 600;">Texas Land Office</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Asking:</span>
                                        <span style="color: #D4A745; font-size: 0.85rem; font-weight: 700;">Rental Terms</span>
                                    </div>
                                </div>

                                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 169, 97, 0.3);">
                                    <div style="margin-bottom: 1rem;">
                                        <a href="https://elpasoverse.webflow.io/land-growth/rio-texaco-texas" target="_blank" style="color: #C9A961; font-size: 0.85rem; text-decoration: underline;">View Detailed Information ‚Üí</a>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                        <span style="color: #EDD9C0; font-size: 0.85rem;">Community Support</span>
                                        <span class="vote-count" style="color: #C9A961; font-weight: 700;">0 votes</span>
                                    </div>
                                    <button class="land-vote-btn" data-target="rio-texaco" style="width: 100%; padding: 0.75rem; background: linear-gradient(135deg, #C9A961 0%, #D4A745 100%); color: #1a1a1a; border: none; border-radius: 4px; font-weight: 700; font-size: 0.95rem; cursor: pointer; transition: all 0.3s;">
                                        Vote for This Target
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    </div>
                </div>

                <!-- Additional Information -->
                <div style="background: linear-gradient(135deg, #EDD9C0 0%, #E8D5C0 100%); border: 2px solid #C9A961; padding: 2rem; border-radius: 8px;">
                    <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.4rem; font-weight: 700; color: #3A2820; margin: 0 0 1rem 0;">About the Land Race</h4>
                    <p style="color: #1a1a1a; font-size: 0.95rem; line-height: 1.8; margin-bottom: 1rem;">
                        The El Paso Verse land acquisition strategy is guided by community input. These three targets are currently under review and discussion. Your votes help the community prioritize which location to pursue as we build toward the physical 1880 frontier destination.
                    </p>
                    <p style="color: #1a1a1a; font-size: 0.95rem; line-height: 1.8; margin: 0;">
                        <strong>Learn more:</strong> Review the complete vision and land strategy in the <a href="https://drive.google.com/file/d/1D_xbK8tDvH35-UsiSHx7cH91E3nz6ySO/view" target="_blank" style="color: #C9A961; text-decoration: underline;">VisionPaper</a>.
                    </p>
                </div>
            </div>

            <!-- Governance Tab -->
            <div id="governance-tab" class="tab-pane">
                <h3 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #3A2820; margin-bottom: 1rem;">Community Voting</h3>
                <p style="color: #000000; margin-bottom: 2rem;">Help shape the physical frontier destination through community-driven decisions. Your PASO credits determine your voting power in building the 1880 world.</p>

                <!-- Governance Overview -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="font-size: 3rem;">üó≥Ô∏è</div>
                        <div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.8rem; font-weight: 700; color: #f9f3e3; margin: 0;">Your Voting Power</h4>
                            <p style="color: #a89178; font-size: 0.9rem; margin: 0.5rem 0 0 0;">Community-driven decisions on building the physical destination</p>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="background: rgba(0,0,0,0.3); padding: 1.25rem; border-radius: 4px; border-left: 3px solid #c9a860;">
                            <div style="color: #c9a860; font-size: 0.75rem; letter-spacing: 0.1em; font-weight: 600; margin-bottom: 0.5rem;">YOUR VOTING POWER</div>
                            <div id="votingPower" style="font-size: 2rem; font-weight: 900; color: #f9f3e3;">0 <span style="font-size: 1rem; font-weight: 400;">votes</span></div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); padding: 1.25rem; border-radius: 4px; border-left: 3px solid #c9a860;">
                            <div style="color: #c9a860; font-size: 0.75rem; letter-spacing: 0.1em; font-weight: 600; margin-bottom: 0.5rem;">PROPOSALS VOTED</div>
                            <div style="font-size: 2rem; font-weight: 900; color: #f9f3e3;">0</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); padding: 1.25rem; border-radius: 4px; border-left: 3px solid #c9a860;">
                            <div style="color: #c9a860; font-size: 0.75rem; letter-spacing: 0.1em; font-weight: 600; margin-bottom: 0.5rem;">PARTICIPATION RATE</div>
                            <div style="font-size: 2rem; font-weight: 900; color: #f9f3e3;">0%</div>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 4px;">
                        <h5 style="color: #c9a860; font-weight: 700; margin-bottom: 1rem; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.1em;">What You Can Vote On:</h5>
                        <ul style="color: #d4c4a8; font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 1.2rem;">
                            <li><strong>Infrastructure Priorities</strong> - Which areas of the frontier to develop first</li>
                            <li><strong>Economic Incentives</strong> - How commerce and trade operates in the 1880s world</li>
                            <li><strong>Community Projects</strong> - Use of community-funded initiatives for real-world development</li>
                            <li><strong>Land Development</strong> - Town layouts, buildings, and infrastructure projects</li>
                            <li><strong>Credits Management</strong> - Community decisions on PASO credit distribution and rewards</li>
                            <li><strong>Frontier Expansion</strong> - New experiences, locations, and opportunities to add</li>
                        </ul>
                    </div>
                </div>

                <!-- Active Proposals -->
                <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%); border: 2px solid #c9a860; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
                    <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.5rem; font-weight: 700; color: #f9f3e3; margin-bottom: 1.5rem;">Active Proposals</h4>

                    <div id="activeProposals">
                        <!-- Demo Proposal -->
                        <div style="background: rgba(0,0,0,0.3); border: 2px solid #c9a860; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                                <div>
                                    <div style="display: inline-block; background: #c9a860; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.7rem; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 0.75rem; border-radius: 2px;">ACTIVE</div>
                                    <h5 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #f9f3e3; margin: 0 0 0.5rem 0;">Land Development Priority: Hub Portal Construction</h5>
                                    <p style="color: #a89178; font-size: 0.85rem; margin: 0;">Proposal to prioritize construction of the Hub Portal as the central point for managing tourism and resident logistics.</p>
                                </div>
                                <div style="background: #1a1a1a; padding: 0.75rem 1rem; border-radius: 4px; text-align: center; border: 1px solid #c9a860;">
                                    <div style="color: #c9a860; font-size: 0.7rem; letter-spacing: 0.1em; font-weight: 600;">ENDS IN</div>
                                    <div style="font-size: 1.2rem; font-weight: 900; color: #f9f3e3;">7 DAYS</div>
                                </div>
                            </div>

                            <!-- Vote Stats -->
                            <div style="margin: 1.5rem 0;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span style="color: #d4c4a8; font-size: 0.85rem;">Current Results</span>
                                    <span style="color: #f9f3e3; font-size: 0.85rem; font-weight: 700;">67% For ‚Ä¢ 33% Against</span>
                                </div>
                                <div style="background: #1a1a1a; height: 20px; border-radius: 10px; overflow: hidden;">
                                    <div style="background: linear-gradient(90deg, #2d8a2d 0%, #90ee90 100%); width: 67%; height: 100%;"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-top: 0.5rem;">
                                    <span style="color: #90ee90; font-size: 0.8rem;">For: 6,700,000 PASO</span>
                                    <span style="color: #ff9090; font-size: 0.8rem;">Against: 3,300,000 PASO</span>
                                </div>
                            </div>

                            <!-- Your Votes on this Topic -->
                            <div style="background: rgba(201, 168, 97, 0.1); border: 1px solid rgba(201, 168, 97, 0.3); padding: 0.75rem 1rem; border-radius: 4px; margin-top: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                <img src="assets/paso-token.png" alt="PASO" style="width: 20px; height: 20px;">
                                <span style="color: #c9a860; font-size: 0.85rem;">Your voting power on this topic:</span>
                                <span id="proposalVotingPower" style="color: #f9f3e3; font-weight: 700; font-size: 0.9rem;">0 votes</span>
                            </div>

                            <!-- Vote Buttons -->
                            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                <button onclick="alert('Demo Mode: Voting will be enabled when governance contracts are deployed.')" style="flex: 1; background: #2d8a2d; color: #fff; padding: 1rem; font-weight: 700; border: 2px solid #2d8a2d; border-radius: 4px; cursor: pointer; transition: all 0.3s ease;">
                                    ‚úì Vote For
                                </button>
                                <button onclick="alert('Demo Mode: Voting will be enabled when governance contracts are deployed.')" style="flex: 1; background: transparent; color: #ff9090; padding: 1rem; font-weight: 700; border: 2px solid #8a2d2d; border-radius: 4px; cursor: pointer; transition: all 0.3s ease;">
                                    ‚úó Vote Against
                                </button>
                            </div>
                        </div>

                        <!-- Coming Soon Message -->
                        <div style="text-align: center; padding: 2rem; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px dashed rgba(201, 168, 97, 0.5);">
                            <p style="color: #d4c4a8; font-size: 0.95rem; margin: 0;">More proposals will appear as the community grows. Check back soon!</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Votes -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 2px solid #c9a860; padding: 2rem; border-radius: 8px;">
                    <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.5rem; font-weight: 700; color: #f9f3e3; margin-bottom: 1.5rem;">Your Vote History</h4>

                    <div style="text-align: center; padding: 3rem 2rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;">üìä</div>
                        <p style="color: #a89178; font-size: 0.95rem; margin: 0;">You haven't participated in any votes yet.</p>
                        <p style="color: #999; font-size: 0.85rem; margin-top: 0.5rem;">Your vote history will appear here once you start voting on proposals.</p>
                    </div>
                </div>
            </div>

            <!-- Development Team Tab -->
            <div id="team-tab" class="tab-pane">
                <h3 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #3A2820; margin-bottom: 1rem;">Development Team</h3>
                <p style="color: #1a1a1a; margin-bottom: 2rem; line-height: 1.8;">Meet the visionaries building El Paso Verse ‚Äî a team of seasoned film executives, technologists, and real-world builders creating something unprecedented: where story, land, and community converge into a physical 1880 frontier.</p>

                <!-- Core Team Section -->
                <div style="margin-bottom: 3rem;">
                    <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.5rem; font-weight: 700; color: #3A2820; margin-bottom: 1.5rem; border-bottom: 2px solid #D4A745; padding-bottom: 0.5rem;">Core Team</h4>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <!-- Ryan Wiik -->
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 2rem; border-radius: 8px; position: relative;">
                            <div style="position: absolute; top: 1rem; right: 1rem; background: #C9A961; color: #1a1a1a; padding: 0.25rem 0.75rem; font-size: 0.7rem; font-weight: 700; letter-spacing: 0.1em; border-radius: 2px;">CREATOR</div>
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <img src="assets/ryan-wiik-profile.jpg" alt="Ryan Wiik" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #D4A745; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                            </div>
                            <h5 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 0.5rem 0;">Ryan Wiik</h5>
                            <div style="color: #D4A745; font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem;">Visionary / Creator</div>
                            <p style="color: #1a1a1a; font-size: 0.9rem; line-height: 1.6; margin-bottom: 1.5rem;">His days in a suit are numbered. Meetings before noon? Rare. He writes it, shoots it, builds it ‚Äî then vanishes into the dust to do it again. As Harry West, he's the myth at the heart of El Paso Verse. As Ryan Wiik, he's the creator behind the madness ‚Äî the one who charted the Verse and won't stop until it's done.</p>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <a href="https://x.com/ryanwiik" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                    @ryanwiik
                                </a>
                                <a href="https://instagram.com/ryanwiik" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                    @ryanwiik
                                </a>
                                <a href="https://youtube.com/@ryan_wiik" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                                    </svg>
                                    @ryan_wiik
                                </a>
                            </div>
                        </div>

                        <!-- Patrick Tobler -->
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 2rem; border-radius: 8px;">
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <img src="assets/patrick-tobler-profile.jpg" alt="Patrick Tobler" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #D4A745; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                            </div>
                            <h5 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 0.5rem 0;">Patrick Tobler</h5>
                            <div style="color: #D4A745; font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem;">Head of Technology</div>
                            <p style="color: #1a1a1a; font-size: 0.9rem; line-height: 1.6; margin-bottom: 1.5rem;">Founder and CEO of NMKR, and multiple successful companies in the tech space. Tobler is in charge of the tech and web 3.0 development to take El Paso Verse into the future. He is also an active contributor in the NFT backed commodity community on the Cardano blockchain. One day he too will retreat into the El Paso Verse...</p>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <a href="https://x.com/Padierfind" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                    @Padierfind
                                </a>
                                <a href="https://www.linkedin.com/in/patrick-tobler-6593b912b/" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                    </svg>
                                    LinkedIn
                                </a>
                            </div>
                        </div>

                        <!-- Christian Ramirez -->
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 2rem; border-radius: 8px;">
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <img src="assets/christian-ramirez-profile.jpg" alt="Christian Ramirez" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #D4A745; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                            </div>
                            <h5 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 0.5rem 0;">Christian Ramirez</h5>
                            <div style="color: #D4A745; font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem;">Chairman & Art Director</div>
                            <p style="color: #1a1a1a; font-size: 0.9rem; line-height: 1.6; margin-bottom: 1.5rem;">Chairman of the El Paso Verse film company ‚Äî though you'd never guess it watching him haul lumber through the Almer√≠a sun. Emmy-winner, world-builder, and firm believer that every desert shoot needs two things: cold A/C and iced tea.</p>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <a href="https://x.com/elpasoverse" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                    @elpasoverse
                                </a>
                                <a href="https://instagram.com/elpasoverse" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                    @elpasoverse
                                </a>
                            </div>
                        </div>

                        <!-- Michel de Beer -->
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 2rem; border-radius: 8px;">
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <img src="assets/michel-debeer-profile.jpg" alt="Michel de Beer" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #D4A745; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                            </div>
                            <h5 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 0.5rem 0;">Michel de Beer</h5>
                            <div style="color: #D4A745; font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem;">Treasurer</div>
                            <p style="color: #1a1a1a; font-size: 0.9rem; line-height: 1.6; margin-bottom: 1.5rem;">Treasurer of El Paso Verse. Real estate visionary by trade ‚Äî but when the cameras roll, he dives headfirst into the myth. (Literally ‚Äî he plays Leo, the dive master.) Between raising villas and scouting land, he's helping build the foundation for a world where story and soil are one and the same.</p>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <a href="https://x.com/elpasoverse" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                    Connect on X
                                </a>
                                <a href="https://instagram.com/elpasoverse" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                    Instagram
                                </a>
                            </div>
                        </div>

                        <!-- Tord Eide -->
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 2rem; border-radius: 8px;">
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <img src="assets/tord-eide-profile.jpg" alt="Tord Eide" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #D4A745; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                            </div>
                            <h5 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 0.5rem 0;">Tord Eide</h5>
                            <div style="color: #D4A745; font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem;">Head of Legal, Partner</div>
                            <p style="color: #1a1a1a; font-size: 0.9rem; line-height: 1.6; margin-bottom: 1.5rem;">Former partner with the international law firm DLA Piper for over 23 years, closely familiar with international regulatory requirements, and has complex experience with special situations internationally. His business operations are split between Europe and the U.S., which makes Tord uniquely suited for the growth objectives of El Paso Verse.</p>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <a href="https://instagram.com/zemosa" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                    @zemosa
                                </a>
                                <a href="https://www.linkedin.com/in/tord-eide" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                    </svg>
                                    LinkedIn
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Company Info -->
                <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; padding: 2rem; border-radius: 8px; margin-top: 2rem;">
                    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <a href="https://www.kamarastudios.eu" target="_blank" style="flex-shrink: 0;">
                            <img src="assets/kamara-logo-white.png" alt="Kamara" style="height: 60px; width: auto;">
                        </a>
                        <div>
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.5rem; font-weight: 700; color: #f9f3e3; margin: 0 0 0.5rem 0;">About Kamara</h4>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <a href="https://www.kamarastudios.eu" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: rgba(201, 168, 97, 0.2); border: 1px solid #C9A961; color: #C9A961; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#C9A961" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="2" y1="12" x2="22" y2="12"></line>
                                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                                    </svg>
                                    Website
                                </a>
                                <a href="https://instagram.com/kamara_studios" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: transparent; border: 2px solid #8B4513; color: #1a1a1a; text-decoration: none; border-radius: 4px; font-size: 0.85rem; font-weight: 600; transition: all 0.3s;" onmouseover="this.style.background='#8B4513'; this.style.color='#F5E6D3'; this.querySelector('svg').setAttribute('fill', '#F5E6D3');" onmouseout="this.style.background='transparent'; this.style.color='#8B4513'; this.querySelector('svg').setAttribute('fill', '#8B4513');">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                    Instagram
                                </a>
                            </div>
                        </div>
                    </div>
                    <p style="color: #d4c4a8; font-size: 0.95rem; line-height: 1.7; margin-bottom: 1rem;">El Paso Verse is supported by <strong style="color: #C9A961;">Kamara</strong> ‚Äî a privately owned entertainment company for the 21st century, with affiliates in Florida and Spain.</p>
                    <p style="color: #d4c4a8; font-size: 0.95rem; line-height: 1.7; margin-bottom: 1rem;">Kamara was envisioned by seasoned film executives to provide much needed innovation in the entertainment industry. The company developed extensive preparations to acquire and build out existing real estate, part of the long term plan to develop as a powerhouse entertainment studio.</p>
                    <p style="color: #d4c4a8; font-size: 0.95rem; line-height: 1.7;">With production facilities in both the U.S. and Spain, Kamara is developing an initial slate of motion pictures alongside the El Paso Verse community.</p>
                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(201, 168, 97, 0.3);">
                        <p style="color: #a89178; font-size: 0.85rem; margin: 0;">With decades of senior level experience in entertainment, Kamara holds deep know-how on the industry, as well as a formidable network of connections.</p>
                    </div>
                </div>
            </div>

            <!-- Browse Ideas Tab -->
            <div id="browse-tab" class="tab-pane">
                <!-- Stats Bar -->
                <div class="stats-bar">
                    <div class="stat-item">
                        <span class="stat-number" id="totalIdeas">0</span>
                        <span class="stat-label">Total Ideas</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalSupport">0</span>
                        <span class="stat-label">Total Support</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="greenlitCount">0</span>
                        <span class="stat-label">Greenlit</span>
                    </div>
                </div>

                <!-- Filters and Search -->
                <div class="filters-section">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search film ideas..." />
                    </div>
                    <div class="filter-controls">
                        <select id="sortFilter" class="filter-select">
                            <option value="popular">Most Popular</option>
                            <option value="recent">Newest</option>
                            <option value="closest">Closest to Goal</option>
                        </select>
                        <select id="genreFilter" class="filter-select">
                            <option value="all">All Genres</option>
                            <option value="western">Western</option>
                            <option value="drama">Drama</option>
                            <option value="action">Action</option>
                            <option value="thriller">Thriller</option>
                            <option value="mystery">Mystery</option>
                        </select>
                        <select id="statusFilter" class="filter-select">
                            <option value="all">All Status</option>
                            <option value="gathering">Gathering Support</option>
                            <option value="review">Under Review</option>
                            <option value="greenlit">Greenlit</option>
                            <option value="production">In Production</option>
                        </select>
                    </div>
                </div>

                <!-- Ideas Grid -->
                <div id="ideasGrid" class="ideas-grid">
                    <div class="loading-message">Loading film ideas...</div>
                </div>
            </div>

            <!-- Submit Idea Tab -->
            <div id="submit-tab" class="tab-pane">
                <div class="submit-container">
                    <h3 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 2rem; font-weight: 900; color: #3A2820; margin-bottom: 1rem;">Submit Your Idea</h3>
                    <p style="color: #1a1a1a; margin-bottom: 2rem; line-height: 1.8;">Contribute to the El Paso Verse by proposing a new land target or pitching a screenplay for film production.</p>

                    <!-- Submission Type Selector -->
                    <div style="display: flex; gap: 1.5rem; margin-bottom: 2rem; flex-wrap: wrap;">
                        <button onclick="showSubmissionType('land')" id="landSubmitBtn" class="submission-type-btn active" style="flex: 1; min-width: 250px; padding: 1.5rem; background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #C9A961; color: #F5E6D3; border-radius: 8px; cursor: pointer; transition: all 0.3s; font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.1rem; font-weight: 700;">
                            üó∫Ô∏è Land Target Proposal
                        </button>
                        <button onclick="showSubmissionType('screenplay')" id="screenplaySubmitBtn" class="submission-type-btn" style="flex: 1; min-width: 250px; padding: 1.5rem; background: #FFFFFF; border: 3px solid #EDD9C0; color: #3A2820; border-radius: 8px; cursor: pointer; transition: all 0.3s; font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.1rem; font-weight: 700;">
                            üé¨ Screenplay Pitch
                        </button>
                    </div>

                    <!-- Land Target Proposal Form -->
                    <div id="landSubmissionForm" class="submission-form-container">
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 1.5rem; margin-bottom: 2rem; border-radius: 8px;">
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 1rem 0;">Submission Guidelines</h4>
                            <ul style="color: #1a1a1a; font-size: 0.95rem; line-height: 1.8; margin: 0; padding-left: 1.5rem;">
                                <li>Provide detailed information about the proposed land target location</li>
                                <li>Include reference photos showing the property and surrounding area</li>
                                <li>Specify current owner details and acquisition terms</li>
                                <li>Indicate which development level(s) this property suits (Level 1, 2, and/or 3)</li>
                                <li>All submissions are reviewed by the team before being shared with the community</li>
                            </ul>
                        </div>

                        <form id="landTargetForm" class="submission-form">
                            <div class="form-group">
                                <label for="landTitle">Property Name/Title *</label>
                                <input type="text" id="landTitle" maxlength="100" required placeholder="e.g., Rio Bravo Ranch">
                                <span class="char-count">0/100</span>
                            </div>

                            <div class="form-group">
                                <label for="landLocation">Location *</label>
                                <input type="text" id="landLocation" required placeholder="City, State/Province, Country">
                            </div>

                            <div class="form-group">
                                <label for="landAcreage">Estimated Square Acreage *</label>
                                <input type="text" id="landAcreage" required placeholder="e.g., 90,000 acres or 244,084 m¬≤">
                            </div>

                            <div class="form-group">
                                <label for="landOwner">Current Owner *</label>
                                <input type="text" id="landOwner" required placeholder="e.g., Private, Texas Land Office">
                            </div>

                            <div class="form-group">
                                <label for="landAsking">Asking Price/Terms *</label>
                                <input type="text" id="landAsking" required placeholder="e.g., 4 million EUR, Rental Terms">
                            </div>

                            <div class="form-group">
                                <label>Suitable for Development Level(s) *</label>
                                <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 0.5rem;">
                                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                        <input type="checkbox" id="landLevel1" value="1">
                                        <span>Level 1 - Small-scale filming hub & basic infrastructure</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                        <input type="checkbox" id="landLevel2" value="2">
                                        <span>Level 2 - Medium town with hotel/lodging facilities</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                        <input type="checkbox" id="landLevel3" value="3">
                                        <span>Level 3 - Full vision with multiple towns & complete immersion</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="landHighlights">Key Highlights to Consider *</label>
                                <textarea id="landHighlights" rows="6" maxlength="1500" required placeholder="Describe the unique features, advantages, infrastructure, accessibility, natural features, existing structures, etc..."></textarea>
                                <span class="char-count">0/1500</span>
                            </div>

                            <div class="form-group">
                                <label for="landPhotos">Reference Photo(s) *</label>
                                <input type="file" id="landPhotos" accept="image/jpeg,image/png" multiple required>
                                <small>Upload 1-5 photos showing the property. Max 5MB per file, JPG or PNG format</small>
                            </div>

                            <div class="form-group">
                                <label for="landSubmitterName">Your Name *</label>
                                <input type="text" id="landSubmitterName" required placeholder="How should we credit you?">
                            </div>

                            <div class="form-group">
                                <label for="landSubmitterContact">Contact Email *</label>
                                <input type="email" id="landSubmitterContact" required placeholder="For follow-up questions from the team">
                            </div>

                            <div style="background: rgba(139, 69, 19, 0.1); border-left: 3px solid #C9A961; padding: 1rem; margin-bottom: 1.5rem; border-radius: 4px;">
                                <p style="color: #1a1a1a; font-size: 0.9rem; margin: 0; line-height: 1.6;"><strong>Note:</strong> Your submission will be reviewed by the El Paso Verse team. If approved, it will be published to the community for voting and discussion.</p>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="submit-btn">Submit Land Proposal</button>
                            </div>
                        </form>
                    </div>

                    <!-- Screenplay Pitch Form -->
                    <div id="screenplaySubmissionForm" class="submission-form-container" style="display: none;">
                        <div style="background: linear-gradient(135deg, #FFF8E7 0%, #FFEFC9 100%); border: 3px solid #D4A745; padding: 1.5rem; margin-bottom: 2rem; border-radius: 8px;">
                            <h4 style="font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif; font-size: 1.3rem; font-weight: 700; color: #3A2820; margin: 0 0 1rem 0;">Submission Guidelines</h4>
                            <ul style="color: #1a1a1a; font-size: 0.95rem; line-height: 1.8; margin: 0; padding-left: 1.5rem;">
                                <li>Screenplays must be set in the El Paso Verse (perpetual year 1880)</li>
                                <li>Specify the Western subgenre that best describes your story</li>
                                <li>Provide a compelling logline and detailed synopsis</li>
                                <li>Upload poster/one-sheet artwork to visualize your project</li>
                                <li>Include script, lookbook, and sizzle reel if available</li>
                                <li>All submissions are reviewed by the team before being published to the community</li>
                            </ul>
                        </div>

                        <form id="screenplayPitchForm" class="submission-form">
                            <div class="form-group">
                                <label for="filmTitle">Film Title *</label>
                                <input type="text" id="filmTitle" maxlength="100" required>
                                <span class="char-count">0/100</span>
                            </div>

                            <div class="form-group">
                                <label for="filmSubgenre">Western Subgenre *</label>
                                <select id="filmSubgenre" required>
                                    <option value="">Select subgenre...</option>
                                    <option value="classic">Classic Western</option>
                                    <option value="spaghetti">Spaghetti Western</option>
                                    <option value="revisionist">Revisionist Western</option>
                                    <option value="contemporary">Contemporary Western</option>
                                    <option value="epic">Epic Western</option>
                                    <option value="comedy">Western Comedy</option>
                                    <option value="horror">Western Horror</option>
                                    <option value="sci-fi">Weird West / Sci-Fi Western</option>
                                    <option value="noir">Western Noir</option>
                                    <option value="romance">Western Romance</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="filmRuntime">Estimated Runtime *</label>
                                <input type="text" id="filmRuntime" required placeholder="e.g., 90 minutes, 2 hours">
                            </div>

                            <div class="form-group">
                                <label for="filmLogline">Logline (One-sentence pitch) *</label>
                                <textarea id="filmLogline" rows="2" maxlength="200" required placeholder="Capture your story in one compelling sentence"></textarea>
                                <span class="char-count">0/200</span>
                            </div>

                            <div class="form-group">
                                <label for="filmSynopsis">Synopsis *</label>
                                <textarea id="filmSynopsis" rows="8" maxlength="2000" required placeholder="Provide a detailed synopsis covering the main story arc, characters, themes, and what makes this story unique..."></textarea>
                                <span class="char-count">0/2000</span>
                            </div>

                            <div class="form-group">
                                <label for="filmPoster">Poster / One-Sheet Artwork(s) *</label>
                                <input type="file" id="filmPoster" accept="image/jpeg,image/png" multiple required>
                                <small>Upload 1-3 poster designs. Max 5MB per file, JPG or PNG format</small>
                            </div>

                            <div class="form-group">
                                <label for="filmScript">Script (PDF) *</label>
                                <input type="file" id="filmScript" accept="application/pdf" required>
                                <small>Upload your screenplay in PDF format. Max 25MB</small>
                            </div>

                            <div class="form-group">
                                <label for="filmLookbook">Lookbook (Optional)</label>
                                <input type="file" id="filmLookbook" accept="application/pdf">
                                <small>Visual reference document showing cinematography, art direction, costume design, etc. Max 25MB</small>
                            </div>

                            <div class="form-group">
                                <label for="filmSizzleReel">Sizzle Reel URL (Optional)</label>
                                <input type="url" id="filmSizzleReel" placeholder="https://vimeo.com/your-sizzle-reel or YouTube link">
                                <small>Link to a short video teaser/sizzle reel if available</small>
                            </div>

                            <div class="form-group">
                                <label for="filmSubmitterName">Your Name / Team Name *</label>
                                <input type="text" id="filmSubmitterName" required placeholder="How should we credit you?">
                            </div>

                            <div class="form-group">
                                <label for="filmSubmitterContact">Contact Email *</label>
                                <input type="email" id="filmSubmitterContact" required placeholder="For follow-up from the production team">
                            </div>

                            <div style="background: rgba(139, 69, 19, 0.1); border-left: 3px solid #C9A961; padding: 1rem; margin-bottom: 1.5rem; border-radius: 4px;">
                                <p style="color: #1a1a1a; font-size: 0.9rem; margin: 0; line-height: 1.6;"><strong>Note:</strong> Your screenplay submission will be reviewed by the production team. If approved, it will be published to the community for voting and support.</p>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="submit-btn">Submit Screenplay Pitch</button>
                            </div>
                        </form>
                    </div>

                    <div id="submitSuccess" class="success-message" style="display: none;">
                        <h4>Success!</h4>
                        <p id="successMessage">Your submission has been received and will be reviewed by the team.</p>
                    </div>
                </div>
            </div>

            <!-- My Activity Tab -->
            <div id="activity-tab" class="tab-pane">
                <h3>My Activity</h3>

                <div class="activity-section">
                    <h4>My Submissions</h4>
                    <div id="mySubmissions" class="my-submissions">
                        <p class="empty-state">You haven't submitted any ideas yet.</p>
                    </div>
                </div>

                <div class="activity-section">
                    <h4>Projects I Support</h4>
                    <div id="mySupported" class="my-supported">
                        <p class="empty-state">You haven't supported any projects yet.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="members-footer">
        <p>&copy; 2026 El Paso Verse. A community-driven frontier.</p>
    </footer>

    <!-- Firebase SDK Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <!-- Custom Scripts -->
    <script src="firebase-config.js"></script>
    <script src="auth.js?v=2"></script>
    <script src="points-system.js?v=2"></script>
    <script src="wallet-connect.js"></script>
    <script src="community.js"></script>
    <script>
        // Initialize the page
        document.addEventListener('DOMContentLoaded', async function() {
            // Wait for auth state and display username
            await waitForAuthState();
            const username = getUserDisplayName();
            document.getElementById('usernameDisplay').textContent = username;

            // Tab switching
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanes = document.querySelectorAll('.tab-pane');

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');

                    // Remove active class from all
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabPanes.forEach(pane => pane.classList.remove('active'));

                    // Add active class to clicked
                    this.classList.add('active');
                    document.getElementById(tabName + '-tab').classList.add('active');
                });
            });

            // Character counters
            const fields = ['ideaTitle', 'ideaLogline', 'ideaDescription'];
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', function() {
                        const counter = this.parentElement.querySelector('.char-count');
                        if (counter) {
                            const maxLength = this.getAttribute('maxlength');
                            counter.textContent = `${this.value.length}/${maxLength}`;
                        }
                    });
                }
            });

            // Load initial data
            if (typeof loadIdeas === 'function') {
                loadIdeas();
            }

            // Initialize Dashboard data
            updateDashboard();
        });

        // Dashboard update function
        function updateDashboard() {
            // Get PASO balance - check Firebase first, fallback to demo
            let pasoBalance = 25; // Default demo balance

            // Try to get from points system (Firebase)
            if (typeof getUserPoints === 'function') {
                getUserPoints().then(points => {
                    if (points > 0) {
                        updateBalanceDisplay(points);
                    }
                }).catch(() => {});
            }

            // Check localStorage for saved balance, default to 25 for demo
            const savedBalance = localStorage.getItem('pasoBalance');
            if (savedBalance) {
                pasoBalance = parseInt(savedBalance) || 25;
            } else {
                pasoBalance = 25; // Demo balance
            }

            updateBalanceDisplay(pasoBalance);
        }

        function updateBalanceDisplay(balance) {
            document.getElementById('pasoBalance').textContent = balance.toLocaleString();

            // Save to localStorage for gazette access check
            localStorage.setItem('pasoBalance', balance.toString());

            // Update voting power based on PASO balance
            document.getElementById('votingPower').innerHTML = balance.toLocaleString() + ' <span style="font-size: 1rem; font-weight: 400;">votes</span>';
            const proposalVotingPower = document.getElementById('proposalVotingPower');
            if (proposalVotingPower) {
                proposalVotingPower.textContent = balance.toLocaleString() + ' votes';
            }

            // Check El Paso Pass status
            const hasNFT = localStorage.getItem('nftVerified') === 'true';
            const elPasoPassStatus = document.getElementById('elPasoPassStatus');

            if (hasNFT) {
                // Genesis Collection holder gets automatic El Paso Pass
                elPasoPassStatus.innerHTML = `
                    <div style="background: rgba(45, 138, 45, 0.2); border-left: 3px solid #2d8a2d; padding: 1rem; border-radius: 4px;">
                        <div style="color: #90ee90; font-weight: 700; margin-bottom: 0.5rem;">‚úì El Paso Pass Active</div>
                        <div style="color: #d0f0d0; font-size: 0.9rem;">Your Genesis Collection grants you automatic El Paso Pass access with all benefits!</div>
                    </div>
                `;

                // Update badge display for Genesis holder
                updateBadgeDisplay(hasNFT, false, false);
            } else if (balance >= 1000) {
                // Sufficient PASO balance for Pass (TBD threshold)
                elPasoPassStatus.innerHTML = `
                    <div style="background: rgba(45, 138, 45, 0.2); border-left: 3px solid #2d8a2d; padding: 1rem; border-radius: 4px;">
                        <div style="color: #90ee90; font-weight: 700; margin-bottom: 0.5rem;">‚úì El Paso Pass Active</div>
                        <div style="color: #d0f0d0; font-size: 0.9rem;">Your PASO holdings qualify you for El Paso Pass access!</div>
                    </div>
                `;
            } else {
                // No pass access
                elPasoPassStatus.innerHTML = `
                    <div style="background: rgba(0,0,0,0.4); border-left: 3px solid #8a2d2d; padding: 1rem; border-radius: 4px;">
                        <div style="color: #ff9090; font-weight: 700; margin-bottom: 0.5rem;">‚ö† Pass Inactive</div>
                        <div style="color: #d4c4a8; font-size: 0.9rem;">Connect your wallet or acquire PASO to activate your El Paso Pass</div>
                    </div>
                `;
            }
        }

        // Update badge display function
        function updateBadgeDisplay(hasGenesis, hasMotionPrints, hasDirectorsCut) {
            const userBadges = document.getElementById('userBadges');

            // This would be expanded with actual badge checking logic
            // For now, keeping the locked state display
        }

        // Update dashboard when wallet connects
        window.addEventListener('walletConnected', updateDashboard);

        // Land Target Voting
        document.addEventListener('DOMContentLoaded', function() {
            // Load existing votes from localStorage
            loadLandVotes();

            // Add click handlers to all vote buttons
            const voteButtons = document.querySelectorAll('.land-vote-btn');
            voteButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    voteLandTarget(targetId);
                });
            });
        });

        function loadLandVotes() {
            const votes = JSON.parse(localStorage.getItem('landVotes') || '{"verse-hotel": 0, "western-leone": 0, "rio-texaco": 0}');
            const userVotes = JSON.parse(localStorage.getItem('userLandVotes') || '[]');

            // Update vote counts
            Object.keys(votes).forEach(targetId => {
                const card = document.querySelector(`.land-target-card[data-target="${targetId}"]`);
                if (card) {
                    const voteCount = card.querySelector('.vote-count');
                    if (voteCount) {
                        voteCount.textContent = `${votes[targetId]} vote${votes[targetId] !== 1 ? 's' : ''}`;
                    }

                    // Update button if user already voted for this target
                    if (userVotes.includes(targetId)) {
                        const button = card.querySelector('.land-vote-btn');
                        button.textContent = 'Voted ‚úì';
                        button.style.background = 'linear-gradient(135deg, #2d8a2d 0%, #3a9a3a 100%)';
                        button.style.color = '#FFFFFF';
                        button.disabled = true;
                    }
                }
            });
        }

        function voteLandTarget(targetId) {
            const userVotes = JSON.parse(localStorage.getItem('userLandVotes') || '[]');

            // Check if user already voted for this target
            if (userVotes.includes(targetId)) {
                alert('You have already voted for this land target!');
                return;
            }

            // Add vote
            const votes = JSON.parse(localStorage.getItem('landVotes') || '{"verse-hotel": 0, "western-leone": 0, "rio-texaco": 0}');
            votes[targetId] = (votes[targetId] || 0) + 1;
            localStorage.setItem('landVotes', JSON.stringify(votes));

            // Track user vote
            userVotes.push(targetId);
            localStorage.setItem('userLandVotes', JSON.stringify(userVotes));

            // Update UI
            loadLandVotes();

            // Success message
            const targetNames = {
                'verse-hotel': '"Verse Hotel" Almeria',
                'western-leone': 'Western Leone',
                'rio-texaco': 'Rio Texaco'
            };
            alert(`Thank you for voting for ${targetNames[targetId]}!\n\nYour voice helps shape where the El Paso Verse frontier takes root.`);
        }

        // Land Carousel Navigation
        function moveLandCarousel(direction) {
            const grid = document.querySelector('.land-targets-grid');
            const cardWidth = grid.querySelector('.land-target-card').offsetWidth;
            const gap = 16; // 1rem gap
            const scrollAmount = (cardWidth + gap) * direction;

            grid.scrollBy({
                left: scrollAmount,
                behavior: 'smooth'
            });
        }

        // Submission Type Toggle
        function showSubmissionType(type) {
            const landForm = document.getElementById('landSubmissionForm');
            const screenplayForm = document.getElementById('screenplaySubmissionForm');
            const landBtn = document.getElementById('landSubmitBtn');
            const screenplayBtn = document.getElementById('screenplaySubmitBtn');

            if (type === 'land') {
                landForm.style.display = 'block';
                screenplayForm.style.display = 'none';
                landBtn.style.background = 'linear-gradient(135deg, #2c1810 0%, #4a2511 100%)';
                landBtn.style.border = '3px solid #C9A961';
                landBtn.style.color = '#F5E6D3';
                screenplayBtn.style.background = '#FFFFFF';
                screenplayBtn.style.border = '3px solid #EDD9C0';
                screenplayBtn.style.color = '#3A2820';
            } else {
                landForm.style.display = 'none';
                screenplayForm.style.display = 'block';
                screenplayBtn.style.background = 'linear-gradient(135deg, #2c1810 0%, #4a2511 100%)';
                screenplayBtn.style.border = '3px solid #C9A961';
                screenplayBtn.style.color = '#F5E6D3';
                landBtn.style.background = '#FFFFFF';
                landBtn.style.border = '3px solid #EDD9C0';
                landBtn.style.color = '#3A2820';
            }
        }

        // Land Target Form Submission
        document.addEventListener('DOMContentLoaded', function() {
            const landForm = document.getElementById('landTargetForm');
            if (landForm) {
                landForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    // Validate at least one level is selected
                    const level1 = document.getElementById('landLevel1').checked;
                    const level2 = document.getElementById('landLevel2').checked;
                    const level3 = document.getElementById('landLevel3').checked;

                    if (!level1 && !level2 && !level3) {
                        alert('Please select at least one development level.');
                        return;
                    }

                    // Show success message
                    document.getElementById('submitSuccess').style.display = 'block';
                    document.getElementById('successMessage').textContent = 'Your land target proposal has been submitted for review. The team will evaluate your submission and contact you via email.';
                    landForm.reset();

                    // Scroll to success message
                    document.getElementById('submitSuccess').scrollIntoView({ behavior: 'smooth', block: 'center' });

                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        document.getElementById('submitSuccess').style.display = 'none';
                    }, 5000);
                });
            }

            // Screenplay Form Submission
            const screenplayForm = document.getElementById('screenplayPitchForm');
            if (screenplayForm) {
                screenplayForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    // Show success message
                    document.getElementById('submitSuccess').style.display = 'block';
                    document.getElementById('successMessage').textContent = 'Your screenplay pitch has been submitted for review. The production team will evaluate your submission and reach out via email.';
                    screenplayForm.reset();

                    // Scroll to success message
                    document.getElementById('submitSuccess').scrollIntoView({ behavior: 'smooth', block: 'center' });

                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        document.getElementById('submitSuccess').style.display = 'none';
                    }, 5000);
                });
            }

            // Character counters for new forms
            const textFields = [
                { id: 'landTitle', max: 100 },
                { id: 'landHighlights', max: 1500 },
                { id: 'filmTitle', max: 100 },
                { id: 'filmLogline', max: 200 },
                { id: 'filmSynopsis', max: 2000 }
            ];

            textFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (element) {
                    const counter = element.parentElement.querySelector('.char-count');
                    if (counter) {
                        element.addEventListener('input', function() {
                            counter.textContent = `${this.value.length}/${field.max}`;
                        });
                    }
                }
            });
        });

        // Social Sharing Functions for Land Targets
        function shareOnX(targetId) {
            const landTargets = {
                'verse-hotel': {
                    title: 'Verse Hotel - Almeria, Spain',
                    description: 'Community Hotel & Camp in Spain - 21-room boutique hotel with spa, natural hot spring facilities, 244,084 m¬≤ land for expansion, and film screening cinema venue.'
                },
                'western-leone': {
                    title: 'Western Leone - Almeria, Spain',
                    description: 'A Filming Hub & Level 1 Development - Historic Sergio Leone film set, Tabernas Desert location, authentic Western town structures, and professional filming hub.'
                },
                'rio-texaco': {
                    title: 'Rio Texaco - Big Bend, Texas',
                    description: 'Land for the Full Vision: Level 1-3 - 90,000 acres of Texas borderland, 5 miles of Rio Grande riverfront, ultimate frontier destination with multiple towns and full immersion.'
                }
            };

            const target = landTargets[targetId];
            const text = `${target.title}\n\n${target.description}\n\nVote for this El Paso Verse land target!`;
            const url = window.location.href;
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            window.open(twitterUrl, '_blank', 'width=550,height=420');
        }

        function shareOnFacebook(targetId) {
            const url = window.location.href;
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            window.open(facebookUrl, '_blank', 'width=550,height=420');
        }

        function copyShareLink(targetId) {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert('Link copied to clipboard! Share it with your community.');
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy link. Please copy manually: ' + url);
            });
        }

        // Account Dropdown Toggle
        document.getElementById('accountBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            document.querySelector('.account-dropdown').classList.toggle('open');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            document.querySelector('.account-dropdown').classList.remove('open');
        });

        // Account Settings Modal
        function openAccountSettings() {
            document.querySelector('.account-dropdown').classList.remove('open');
            document.getElementById('accountModal').classList.add('show');
            document.getElementById('currentEmail').textContent = getCurrentUserEmail() || 'Not available';
            document.getElementById('currentDisplayName').textContent = getUserDisplayName();
        }

        function closeAccountSettings() {
            document.getElementById('accountModal').classList.remove('show');
            // Clear forms and messages
            document.querySelectorAll('.account-message').forEach(el => el.style.display = 'none');
            document.getElementById('newDisplayName').value = '';
            document.getElementById('newEmail').value = '';
            document.getElementById('emailPassword').value = '';
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
        }

        // Withdraw to Wallet Modal
        function showWithdrawModal() {
            const currentBalance = typeof getPasoCredits === 'function' ? getPasoCredits() : 0;
            const modal = document.createElement('div');
            modal.id = 'withdrawModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.85);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%);
                    border: 2px solid #C9A961;
                    border-radius: 8px;
                    padding: 2rem;
                    max-width: 500px;
                    width: 90%;
                ">
                    <h3 style="
                        font-family: 'Avenir Next Condensed', 'Avenir Next', Avenir, sans-serif;
                        color: #C9A961;
                        margin: 0 0 1.5rem 0;
                        text-align: center;
                    ">Withdraw PASO to External Wallet</h3>

                    <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                        <p style="color: #d4c4a8; font-size: 0.9rem; margin-bottom: 1rem;">
                            <strong>Your Balance:</strong> <span style="color: #c9a860; font-weight: 700;">${currentBalance.toLocaleString()} PASO Credits</span>
                        </p>
                        <p style="color: #a89178; font-size: 0.85rem; line-height: 1.6; margin: 0;">
                            You can withdraw your PASO credits to a Cardano wallet at a <strong>1:1 ratio</strong>.
                            This converts your in-app credits to on-chain PASO tokens.
                        </p>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="color: #d4c4a8; font-size: 0.85rem; display: block; margin-bottom: 0.5rem;">Amount to Withdraw</label>
                        <input type="number" id="withdrawAmount" placeholder="Enter amount" min="1" max="${currentBalance}" style="
                            width: 100%;
                            padding: 0.75rem;
                            background: #1a1a1a;
                            border: 1px solid #C9A961;
                            color: #f9f3e3;
                            border-radius: 4px;
                            font-size: 1rem;
                        ">
                    </div>

                    <p style="color: #ff9090; font-size: 0.8rem; margin-bottom: 1.5rem; padding: 0.75rem; background: rgba(255,144,144,0.1); border-radius: 4px;">
                        Note: Withdrawals require a connected Cardano wallet and may take up to 24 hours to process.
                    </p>

                    <div style="display: flex; gap: 1rem;">
                        <button onclick="initiateWithdraw()" style="
                            flex: 1;
                            padding: 0.875rem;
                            background: linear-gradient(135deg, #C9A961 0%, #8B6914 100%);
                            color: #1a1a1a;
                            border: none;
                            border-radius: 4px;
                            font-weight: 700;
                            cursor: pointer;
                        ">Connect Wallet & Withdraw</button>
                        <button onclick="closeWithdrawModal()" style="
                            padding: 0.875rem 1.5rem;
                            background: transparent;
                            border: 1px solid #666;
                            color: #999;
                            cursor: pointer;
                            border-radius: 4px;
                        ">Cancel</button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) closeWithdrawModal();
            });
        }

        function closeWithdrawModal() {
            const modal = document.getElementById('withdrawModal');
            if (modal) modal.remove();
        }

        function initiateWithdraw() {
            const amount = parseInt(document.getElementById('withdrawAmount').value);
            const currentBalance = typeof getPasoCredits === 'function' ? getPasoCredits() : 0;

            if (!amount || amount <= 0) {
                alert('Please enter a valid amount to withdraw.');
                return;
            }

            if (amount > currentBalance) {
                alert('Insufficient PASO credits for this withdrawal.');
                return;
            }

            // Close withdraw modal and show wallet selector
            closeWithdrawModal();

            // Store withdrawal intent
            sessionStorage.setItem('pendingWithdrawal', JSON.stringify({
                amount: amount,
                timestamp: Date.now()
            }));

            // Show wallet selector (from wallet-connect.js)
            if (typeof showWalletSelector === 'function') {
                showWalletSelector();
            } else {
                alert('Wallet connection not available. Please try again later.');
            }
        }

    </script>

    <!-- Account Settings Modal -->
    <div class="modal-overlay" id="accountModal">
        <div class="account-modal">
            <div class="account-modal-header">
                <h2>Account Settings</h2>
                <button class="modal-close" onclick="closeAccountSettings()">&times;</button>
            </div>
            <div class="account-modal-body">
                <!-- Current Account Info -->
                <div class="account-section">
                    <h3>Account Information</h3>
                    <div class="account-info">
                        <label>Email</label>
                        <span id="currentEmail">Loading...</span>
                        <button class="change-link" onclick="toggleSettingsSection('emailSection')">Change</button>
                    </div>
                    <div class="account-info">
                        <label>Display Name</label>
                        <span id="currentDisplayName">Loading...</span>
                        <button class="change-link" onclick="toggleSettingsSection('displayNameSection')">Change</button>
                    </div>
                    <div class="account-info" style="border-bottom: none;">
                        <label>Password</label>
                        <span style="color: #666;">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                        <button class="change-link" onclick="toggleSettingsSection('passwordSection')">Change</button>
                    </div>
                </div>

                <!-- Update Display Name (hidden by default) -->
                <div class="account-section settings-section" id="displayNameSection" style="display: none;">
                    <div class="section-header">
                        <h3>Change Display Name</h3>
                        <button class="section-close" onclick="toggleSettingsSection('displayNameSection')">&times;</button>
                    </div>
                    <div class="account-message" id="displayNameMessage" style="display: none;"></div>
                    <form id="displayNameForm">
                        <div class="account-form-group">
                            <label for="newDisplayName">New Display Name</label>
                            <input type="text" id="newDisplayName" placeholder="Enter new display name" required>
                        </div>
                        <button type="submit" class="account-btn-primary">Update Name</button>
                    </form>
                </div>

                <!-- Update Email (hidden by default) -->
                <div class="account-section settings-section" id="emailSection" style="display: none;">
                    <div class="section-header">
                        <h3>Change Email</h3>
                        <button class="section-close" onclick="toggleSettingsSection('emailSection')">&times;</button>
                    </div>
                    <div class="account-message" id="emailMessage" style="display: none;"></div>
                    <form id="emailForm">
                        <div class="account-form-group">
                            <label for="newEmail">New Email</label>
                            <input type="email" id="newEmail" placeholder="Enter new email" required>
                        </div>
                        <div class="account-form-group">
                            <label for="emailPassword">Current Password</label>
                            <input type="password" id="emailPassword" placeholder="Confirm your password" required>
                        </div>
                        <button type="submit" class="account-btn-primary">Update Email</button>
                    </form>
                </div>

                <!-- Update Password (hidden by default) -->
                <div class="account-section settings-section" id="passwordSection" style="display: none;">
                    <div class="section-header">
                        <h3>Change Password</h3>
                        <button class="section-close" onclick="toggleSettingsSection('passwordSection')">&times;</button>
                    </div>
                    <div class="account-message" id="passwordMessage" style="display: none;"></div>
                    <form id="passwordForm">
                        <div class="account-form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" placeholder="Enter current password" required>
                        </div>
                        <div class="account-form-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword" placeholder="Enter new password (min. 6 characters)" required minlength="6">
                        </div>
                        <div class="account-form-group">
                            <label for="confirmNewPassword">Confirm New Password</label>
                            <input type="password" id="confirmNewPassword" placeholder="Confirm new password" required minlength="6">
                        </div>
                        <button type="submit" class="account-btn-primary">Update Password</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Toggle settings sections
        function toggleSettingsSection(sectionId) {
            const section = document.getElementById(sectionId);
            const allSections = document.querySelectorAll('.settings-section');

            // Hide all other sections first
            allSections.forEach(s => {
                if (s.id !== sectionId) {
                    s.style.display = 'none';
                }
            });

            // Toggle the clicked section
            if (section.style.display === 'none') {
                section.style.display = 'block';
            } else {
                section.style.display = 'none';
            }
        }

        // Modal form event listeners (must be after modal HTML)
        document.getElementById('accountModal').addEventListener('click', function(e) {
            if (e.target === this) closeAccountSettings();
        });

        document.getElementById('displayNameForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const newName = document.getElementById('newDisplayName').value.trim();
            const msgEl = document.getElementById('displayNameMessage');

            if (newName) {
                setUserDisplayName(newName);
                document.getElementById('usernameDisplay').textContent = newName;
                document.getElementById('currentDisplayName').textContent = newName;
                msgEl.textContent = 'Display name updated successfully!';
                msgEl.className = 'account-message success';
                msgEl.style.display = 'block';
                document.getElementById('newDisplayName').value = '';
            }
        });

        document.getElementById('emailForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const newEmail = document.getElementById('newEmail').value.trim();
            const password = document.getElementById('emailPassword').value;
            const msgEl = document.getElementById('emailMessage');
            const btn = this.querySelector('button[type="submit"]');

            btn.disabled = true;
            btn.textContent = 'Updating...';

            try {
                const credential = firebase.auth.EmailAuthProvider.credential(
                    auth.currentUser.email,
                    password
                );
                await auth.currentUser.reauthenticateWithCredential(credential);
                await auth.currentUser.updateEmail(newEmail);
                await auth.currentUser.sendEmailVerification();

                msgEl.textContent = 'Email updated! Please verify your new email address.';
                msgEl.className = 'account-message success';
                msgEl.style.display = 'block';
                document.getElementById('currentEmail').textContent = newEmail;
                document.getElementById('newEmail').value = '';
                document.getElementById('emailPassword').value = '';
            } catch (error) {
                let errorMsg = 'Failed to update email.';
                if (error.code === 'auth/wrong-password') errorMsg = 'Incorrect password.';
                if (error.code === 'auth/email-already-in-use') errorMsg = 'Email already in use.';
                if (error.code === 'auth/invalid-email') errorMsg = 'Invalid email address.';
                msgEl.textContent = errorMsg;
                msgEl.className = 'account-message error';
                msgEl.style.display = 'block';
            }

            btn.disabled = false;
            btn.textContent = 'Update Email';
        });

        document.getElementById('passwordForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const currentPwd = document.getElementById('currentPassword').value;
            const newPwd = document.getElementById('newPassword').value;
            const confirmPwd = document.getElementById('confirmNewPassword').value;
            const msgEl = document.getElementById('passwordMessage');
            const btn = this.querySelector('button[type="submit"]');

            if (newPwd !== confirmPwd) {
                msgEl.textContent = 'New passwords do not match.';
                msgEl.className = 'account-message error';
                msgEl.style.display = 'block';
                return;
            }

            if (newPwd.length < 6) {
                msgEl.textContent = 'Password must be at least 6 characters.';
                msgEl.className = 'account-message error';
                msgEl.style.display = 'block';
                return;
            }

            btn.disabled = true;
            btn.textContent = 'Updating...';

            try {
                const credential = firebase.auth.EmailAuthProvider.credential(
                    auth.currentUser.email,
                    currentPwd
                );
                await auth.currentUser.reauthenticateWithCredential(credential);
                await auth.currentUser.updatePassword(newPwd);

                msgEl.textContent = 'Password updated successfully!';
                msgEl.className = 'account-message success';
                msgEl.style.display = 'block';
                document.getElementById('currentPassword').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmNewPassword').value = '';
            } catch (error) {
                let errorMsg = 'Failed to update password.';
                if (error.code === 'auth/wrong-password') errorMsg = 'Current password is incorrect.';
                msgEl.textContent = errorMsg;
                msgEl.className = 'account-message error';
                msgEl.style.display = 'block';
            }

            btn.disabled = false;
            btn.textContent = 'Update Password';
        });
    </script>

    <!-- Shopping Cart Button -->
    <button onclick="toggleCart()" style="position: fixed; bottom: 20px; left: 20px; background: #c9a860; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: all 0.3s ease;">
        <svg viewBox="0 0 24 24" fill="#1a1a1a" style="width: 24px; height: 24px;"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
        <span id="cartCount" style="display: none; position: absolute; top: -5px; right: -5px; background: #ff6b6b; color: white; width: 22px; height: 22px; border-radius: 50%; font-size: 0.75rem; font-weight: 700; align-items: center; justify-content: center;">0</span>
    </button>

    <!-- Shopping Cart Modal -->
    <div id="cartModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: linear-gradient(135deg, #2c1810 0%, #4a2511 100%); border: 3px solid #c9a860; border-radius: 8px; max-width: 450px; width: 90%; max-height: 80vh; overflow: hidden; display: flex; flex-direction: column;">
            <!-- Cart Header -->
            <div style="background: #1a1a1a; padding: 1.25rem 1.5rem; border-bottom: 2px solid #c9a860; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="color: #f9f3e3; font-size: 1.3rem; font-weight: 700; margin: 0;">Your Cart</h3>
                <button onclick="toggleCart()" style="background: none; border: none; color: #c9a860; font-size: 1.5rem; cursor: pointer; line-height: 1;">&times;</button>
            </div>

            <!-- Cart Items -->
            <div style="flex: 1; overflow-y: auto; padding: 1.5rem;">
                <div id="cartEmpty" style="text-align: center; color: #d4c4a8; padding: 2rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üõí</div>
                    <p>Your cart is empty</p>
                    <p style="font-size: 0.85rem; color: #a89178;">Add items to get started</p>
                </div>
                <div id="cartItems"></div>
            </div>

            <!-- Cart Footer -->
            <div style="background: #1a1a1a; padding: 1.25rem 1.5rem; border-top: 2px solid #c9a860;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <span style="color: #d4c4a8; font-size: 1rem;">Total:</span>
                    <span id="cartTotal" style="color: #f9f3e3; font-size: 1.5rem; font-weight: 700;">$0.00</span>
                </div>
                <button id="checkoutBtn" onclick="checkout()" style="display: none; width: 100%; background: #c9a860; color: #1a1a1a; border: none; padding: 1rem; font-weight: 700; font-size: 1rem; border-radius: 4px; cursor: pointer; transition: all 0.3s ease;">
                    CHECKOUT WITH STRIPE
                </button>
            </div>
        </div>
    </div>

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Floating Music Player Overlay -->
    <div id="floatingMusicPlayer" style="display: none; position: fixed; bottom: 20px; right: 20px; background: rgba(58, 40, 32, 0.95); border: 2px solid #C9A961; padding: 0.75rem 1rem; display: none; align-items: center; gap: 0.75rem; z-index: 1000; border-radius: 4px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);">
        <button id="floatingToggle" title="Play/Pause" style="background: #C9A961; border: none; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; flex-shrink: 0;">
            <svg class="floating-play-icon" viewBox="0 0 24 24" fill="#3A2820" style="width: 18px; height: 18px;"><path d="M8 5v14l11-7z"/></svg>
            <svg class="floating-pause-icon" viewBox="0 0 24 24" fill="#3A2820" style="width: 18px; height: 18px; display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <div style="display: flex; flex-direction: column; min-width: 100px;">
            <span id="floatingTrack" style="color: #F5E6D3; font-size: 0.85rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 150px;">Track Name</span>
            <span id="floatingArtist" style="color: #C9A961; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em;">Artist</span>
        </div>
        <div style="display: flex; gap: 0.25rem;">
            <button id="floatingPrev" title="Previous Track" style="background: transparent; border: 1px solid rgba(201, 169, 97, 0.5); width: 28px; height: 28px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">
                <svg viewBox="0 0 24 24" fill="#C9A961" style="width: 16px; height: 16px;"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
            </button>
            <button id="floatingNext" title="Next Track" style="background: transparent; border: 1px solid rgba(201, 169, 97, 0.5); width: 28px; height: 28px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">
                <svg viewBox="0 0 24 24" fill="#C9A961" style="width: 16px; height: 16px;"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
            </button>
        </div>
    </div>

    <!-- Shopping Cart System -->
    <script>
        // ===========================================
        // STRIPE CONFIGURATION
        // Replace with your actual Stripe Price IDs from: https://dashboard.stripe.com/products
        // ===========================================
        const STRIPE_CONFIG = {
            publishableKey: 'pk_test_51SvmSJPz1lzmyAy84GBug0AnwlNi4OfvpUSGMBGdx79tU68eTuSEGRTcfVZMpcbmDdjmDQpsahOJmmH4HysfCtj3004JgZZeaD',
            prices: {
                gazette: {
                    id: 'price_1Svmc5Pz1lzmyAy8TqFSDj4d',
                    name: 'The El Paso Gazette',
                    price: 2.99,
                    image: 'assets/gazette-preview-thumb.png'
                },
                vinyl: {
                    id: 'price_1SvmdcPz1lzmyAy8SwmLZ7IQ',
                    name: 'Vol. I ‚Äî LP Vinyl (Pre-order)',
                    price: 39.00,
                    image: 'assets/album-vol1-cover.webp'
                },
                motionPrint: {
                    id: 'price_1SvmfkPz1lzmyAy8LHa0hPe8',
                    name: 'Motion Print Screening Pass',
                    price: 49.00,
                    image: 'assets/frame-1.png'
                }
            }
        };

        // Shopping Cart
        let cart = JSON.parse(localStorage.getItem('epvCart')) || [];

        function saveCart() {
            localStorage.setItem('epvCart', JSON.stringify(cart));
            updateCartUI();
        }

        function addToCart(productKey) {
            const product = STRIPE_CONFIG.prices[productKey];
            if (!product) return;

            // Check if already in cart
            const existing = cart.find(item => item.key === productKey);
            if (existing) {
                alert(product.name + ' is already in your cart!');
                return;
            }

            cart.push({
                key: productKey,
                name: product.name,
                price: product.price,
                image: product.image,
                priceId: product.id
            });

            saveCart();
            showCartNotification(product.name + ' added to cart!');
        }

        function removeFromCart(productKey) {
            cart = cart.filter(item => item.key !== productKey);
            saveCart();
        }

        function getCartTotal() {
            return cart.reduce((sum, item) => sum + item.price, 0);
        }

        function updateCartUI() {
            const countEl = document.getElementById('cartCount');
            const cartItemsEl = document.getElementById('cartItems');
            const cartTotalEl = document.getElementById('cartTotal');
            const cartEmptyEl = document.getElementById('cartEmpty');
            const checkoutBtn = document.getElementById('checkoutBtn');

            if (countEl) {
                countEl.textContent = cart.length;
                countEl.style.display = cart.length > 0 ? 'flex' : 'none';
            }

            if (cartItemsEl) {
                if (cart.length === 0) {
                    cartItemsEl.innerHTML = '';
                    if (cartEmptyEl) cartEmptyEl.style.display = 'block';
                    if (checkoutBtn) checkoutBtn.style.display = 'none';
                } else {
                    if (cartEmptyEl) cartEmptyEl.style.display = 'none';
                    if (checkoutBtn) checkoutBtn.style.display = 'block';
                    cartItemsEl.innerHTML = cart.map(item => `
                        <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 4px; margin-bottom: 0.75rem;">
                            <img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">
                            <div style="flex: 1;">
                                <div style="color: #f9f3e3; font-weight: 600; font-size: 0.9rem;">${item.name}</div>
                                <div style="color: #c9a860; font-size: 0.85rem;">$${item.price.toFixed(2)}</div>
                            </div>
                            <button onclick="removeFromCart('${item.key}')" style="background: none; border: none; color: #ff6b6b; cursor: pointer; font-size: 1.2rem; padding: 0.25rem;">&times;</button>
                        </div>
                    `).join('');
                }
            }

            if (cartTotalEl) {
                cartTotalEl.textContent = '$' + getCartTotal().toFixed(2);
            }
        }

        function showCartNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = 'position: fixed; bottom: 80px; right: 20px; background: #2d8a2d; color: white; padding: 1rem 1.5rem; border-radius: 4px; z-index: 10001; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.3);';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        function toggleCart() {
            const cartModal = document.getElementById('cartModal');
            if (cartModal.style.display === 'flex') {
                cartModal.style.display = 'none';
            } else {
                cartModal.style.display = 'flex';
                updateCartUI();
            }
        }

        function checkout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }

            if (STRIPE_CONFIG.publishableKey.includes('YOUR_')) {
                alert('Stripe not configured yet. Please add your Stripe publishable key and price IDs.');
                console.log('Cart items for checkout:', cart);
                return;
            }

            // Initialize Stripe and redirect to checkout
            const stripe = Stripe(STRIPE_CONFIG.publishableKey);
            stripe.redirectToCheckout({
                lineItems: cart.map(item => ({
                    price: item.priceId,
                    quantity: 1
                })),
                mode: 'payment',
                successUrl: window.location.origin + '/members.html?purchase=success',
                cancelUrl: window.location.origin + '/members.html?purchase=cancelled'
            }).then(function(result) {
                if (result.error) {
                    alert(result.error.message);
                }
            });
        }

        function purchaseGazette() {
            addToCart('gazette');
        }

        function preorderVinyl() {
            addToCart('vinyl');
        }

        // Initialize cart on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCartUI();

            // Check for successful purchase
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('purchase') === 'success') {
                cart = [];
                saveCart();
                alert('Thank you for your purchase! Check your email for confirmation.');
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });
    </script>

    <!-- Music Player Script -->
    <script>
        // PASO Balance Requirements
        const REQUIRED_PASO_FOR_MUSIC = 5;
        const REQUIRED_PASO_FOR_GAZETTE = 20;
        const REQUIRED_PASO_FOR_MOTIONPRINT = 300;

        function getUserPasoBalance() {
            // Get balance from the dashboard display
            const balanceEl = document.getElementById('pasoBalance');
            if (balanceEl) {
                const balance = parseInt(balanceEl.textContent.replace(/,/g, '')) || 0;
                return balance;
            }
            return 0;
        }

        function canPlayMusic() {
            return getUserPasoBalance() >= REQUIRED_PASO_FOR_MUSIC;
        }

        function updatePasoRequirementUI() {
            const box = document.getElementById('pasoRequirementBox');
            const text = document.getElementById('pasoRequirementText');
            const balance = getUserPasoBalance();

            if (balance >= REQUIRED_PASO_FOR_MUSIC) {
                box.style.borderColor = 'rgba(45, 138, 45, 0.5)';
                box.style.background = 'rgba(45, 138, 45, 0.1)';
                text.innerHTML = '<strong style="color: #90ee90;">‚úì Track Sampling Unlocked</strong> ‚Äî You have ' + balance + ' PASO';
                text.style.color = '#90ee90';
            } else {
                box.style.borderColor = 'rgba(201, 168, 97, 0.5)';
                box.style.background = 'rgba(0,0,0,0.3)';
                text.innerHTML = '<strong>5 PASO</strong> required to sample tracks (You have ' + balance + ')';
                text.style.color = '#c9a860';
            }
        }

        function updateGazetteRequirementUI() {
            const box = document.getElementById('gazetteRequirementBox');
            const text = document.getElementById('gazetteRequirementText');
            const buyBtn = document.getElementById('gazetteBuyBtn');
            const balance = getUserPasoBalance();

            if (balance >= REQUIRED_PASO_FOR_GAZETTE) {
                box.style.borderColor = 'rgba(45, 138, 45, 0.5)';
                box.style.background = 'rgba(45, 138, 45, 0.1)';
                text.innerHTML = '<strong style="color: #90ee90;">‚úì Unlocked</strong> ‚Äî Free access with your ' + balance + ' PASO';
                text.style.color = '#90ee90';
                buyBtn.style.display = 'none';
            } else {
                box.style.borderColor = 'rgba(201, 168, 97, 0.5)';
                box.style.background = 'rgba(0,0,0,0.3)';
                text.innerHTML = '<strong>20 PASO</strong> required (You have ' + balance + ')';
                text.style.color = '#c9a860';
                buyBtn.style.display = 'inline-block';
            }
        }

        function updateMotionPrintRequirementUI() {
            const box = document.getElementById('motionPrintRequirementBox');
            const text = document.getElementById('motionPrintRequirementText');
            const buyBtn = document.getElementById('motionPrintBuyBtn');
            const streamBtn = document.getElementById('motionPrintStreamBtn');
            const balance = getUserPasoBalance();
            const hasNFT = localStorage.getItem('nftVerified') === 'true';

            if (balance >= REQUIRED_PASO_FOR_MOTIONPRINT && hasNFT) {
                // Fully unlocked
                box.style.borderColor = 'rgba(45, 138, 45, 0.5)';
                box.style.background = 'rgba(45, 138, 45, 0.1)';
                text.innerHTML = '<strong style="color: #90ee90;">‚úì Unlocked</strong> ‚Äî Free streaming with your ' + balance + ' PASO + Genesis Collection';
                text.style.color = '#90ee90';
                buyBtn.style.display = 'none';
                streamBtn.style.opacity = '1';
                streamBtn.style.pointerEvents = 'auto';
            } else if (balance >= REQUIRED_PASO_FOR_MOTIONPRINT && !hasNFT) {
                // Has PASO but no NFT
                box.style.borderColor = 'rgba(201, 168, 97, 0.5)';
                box.style.background = 'rgba(0,0,0,0.3)';
                text.innerHTML = '<strong>Genesis Collection</strong> required (You have ' + balance + ' PASO ‚úì)';
                text.style.color = '#c9a860';
                buyBtn.style.display = 'inline-block';
                streamBtn.style.opacity = '0.5';
                streamBtn.style.pointerEvents = 'auto';
            } else if (balance < REQUIRED_PASO_FOR_MOTIONPRINT && hasNFT) {
                // Has NFT but not enough PASO
                box.style.borderColor = 'rgba(201, 168, 97, 0.5)';
                box.style.background = 'rgba(0,0,0,0.3)';
                text.innerHTML = '<strong>300 PASO</strong> required (You have ' + balance + ', Genesis ‚úì)';
                text.style.color = '#c9a860';
                buyBtn.style.display = 'inline-block';
                streamBtn.style.opacity = '0.5';
                streamBtn.style.pointerEvents = 'auto';
            } else {
                // Neither requirement met
                box.style.borderColor = 'rgba(201, 168, 97, 0.5)';
                box.style.background = 'rgba(0,0,0,0.3)';
                text.innerHTML = '<strong>300 PASO</strong> + Genesis Collection required (You have ' + balance + ')';
                text.style.color = '#c9a860';
                buyBtn.style.display = 'inline-block';
                streamBtn.style.opacity = '0.5';
                streamBtn.style.pointerEvents = 'auto';
            }
        }

        function purchaseMotionPrint() {
            addToCart('motionPrint');
        }

        // Motion Print access function
        function accessMotionPrint() {
            const hasNFT = localStorage.getItem('nftVerified') === 'true';
            const balance = getUserPasoBalance();
            const hasPurchased = localStorage.getItem('motionPrintPurchased') === 'true';

            // Allow access if purchased or meets both requirements
            if (hasPurchased || (hasNFT && balance >= REQUIRED_PASO_FOR_MOTIONPRINT)) {
                window.location.href = 'motion-print-stream.html';
            } else if (hasNFT && balance < REQUIRED_PASO_FOR_MOTIONPRINT) {
                alert('Motion Print streaming requires 300 PASO balance.\n\nYou currently have ' + balance + ' PASO. Keep stacking, or purchase a Screening Pass.');
            } else if (!hasNFT && balance >= REQUIRED_PASO_FOR_MOTIONPRINT) {
                alert('Motion Print streaming requires a Genesis Collection film frame.\n\nYou have ' + balance + ' PASO ‚úì, but need to verify your Genesis Collection.\n\nPlease verify above, or purchase a Screening Pass.');
            } else {
                alert('Motion Print streaming requires:\n\n‚Ä¢ 300 PASO balance (You have ' + balance + ')\n‚Ä¢ Genesis Collection ownership\n\nOr purchase a Screening Pass for $49 to unlock instant access.');
            }
        }

        // Community Music Player
        const playlistPortal = [
            { title: 'Campo', artist: 'Kitosch', src: 'assets/music/Campo.m4a' },
            { title: 'Forward Charge onto the Frontier', artist: 'Taizo', src: 'assets/music/Forward Charge onto the Frontier.m4a' },
            { title: 'Bleak Horizon', artist: 'Kitosch', src: 'assets/music/Bleak Horizon.m4a' },
            { title: 'Enemy Territory', artist: 'Kitosch', src: 'assets/music/Enemy Territory.m4a' },
            { title: 'Far East of Yuma', artist: 'Smith', src: 'assets/music/Far East of Yuma.mp3' },
            { title: 'Arrows', artist: 'Kitosch', src: 'assets/music/Arrows.m4a' },
            { title: 'Law of the Jungle', artist: 'Smith', src: 'assets/music/Law of the Jungle.mp3' },
            { title: 'Far East of Pecos', artist: 'Smith', src: 'assets/music/Far East of Pecos.mp3' }
        ];

        let currentTrackIndexPortal = 0;
        let isPlayingPortal = false;
        const audioPortal = new Audio();

        const musicTogglePortal = document.getElementById('musicTogglePortal');
        const musicTrackPortal = document.getElementById('musicTrackPortal');
        const musicArtistPortal = document.getElementById('musicArtistPortal');
        const musicPrevPortal = document.getElementById('musicPrevPortal');
        const musicNextPortal = document.getElementById('musicNextPortal');
        const playIconPortal = document.querySelector('.play-icon-portal');
        const pauseIconPortal = document.querySelector('.pause-icon-portal');
        const trackListPortal = document.getElementById('trackListPortal');

        // Populate track list
        function populateTrackList() {
            trackListPortal.innerHTML = playlistPortal.map((track, index) => `
                <div onclick="loadTrackPortal(${index}); togglePlayPortal();" style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; cursor: pointer; border-radius: 4px; transition: background 0.2s; ${index === currentTrackIndexPortal ? 'background: rgba(201, 168, 97, 0.2);' : ''}" onmouseover="this.style.background='rgba(201, 168, 97, 0.15)'" onmouseout="this.style.background='${index === currentTrackIndexPortal ? 'rgba(201, 168, 97, 0.2)' : 'transparent'}'">
                    <div>
                        <div style="color: #f9f3e3; font-size: 0.95rem; font-weight: 600;">${track.title}</div>
                        <div style="color: #c9a860; font-size: 0.8rem;">${track.artist}</div>
                    </div>
                    <div style="color: #c9a860; font-size: 1.2rem;">${index === currentTrackIndexPortal && isPlayingPortal ? '‚ñ∂' : ''}</div>
                </div>
            `).join('');
        }

        function loadTrackPortal(index) {
            currentTrackIndexPortal = index;
            if (currentTrackIndexPortal < 0) currentTrackIndexPortal = playlistPortal.length - 1;
            if (currentTrackIndexPortal >= playlistPortal.length) currentTrackIndexPortal = 0;

            audioPortal.src = playlistPortal[currentTrackIndexPortal].src;
            musicTrackPortal.textContent = playlistPortal[currentTrackIndexPortal].title;
            musicArtistPortal.textContent = playlistPortal[currentTrackIndexPortal].artist;

            populateTrackList();

            if (isPlayingPortal) {
                audioPortal.play();
            }
        }

        // Progress bar elements
        const progressBarContainer = document.getElementById('progressBarContainer');
        const progressBarFill = document.getElementById('progressBarFill');
        const progressBarHandle = document.getElementById('progressBarHandle');
        const trackTimePortal = document.getElementById('trackTimePortal');

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        function updateProgressBar() {
            if (audioPortal.duration) {
                const percent = (audioPortal.currentTime / audioPortal.duration) * 100;
                progressBarFill.style.width = percent + '%';
                progressBarHandle.style.left = percent + '%';
                trackTimePortal.textContent = formatTime(audioPortal.currentTime) + ' / ' + formatTime(audioPortal.duration);
            }
        }

        // Update progress bar as track plays
        audioPortal.addEventListener('timeupdate', updateProgressBar);
        audioPortal.addEventListener('loadedmetadata', updateProgressBar);

        // Show handle on hover
        if (progressBarContainer) {
            progressBarContainer.addEventListener('mouseenter', () => {
                progressBarHandle.style.opacity = '1';
            });
            progressBarContainer.addEventListener('mouseleave', () => {
                progressBarHandle.style.opacity = '0';
            });

            // Click to seek
            progressBarContainer.addEventListener('click', (e) => {
                const rect = progressBarContainer.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                if (audioPortal.duration) {
                    audioPortal.currentTime = percent * audioPortal.duration;
                }
            });
        }

        function togglePlayPortal() {
            // Check PASO balance before playing
            if (!isPlayingPortal && !canPlayMusic()) {
                alert('You need at least 5 PASO to sample tracks. Your current balance: ' + getUserPasoBalance() + ' PASO');
                return;
            }

            if (isPlayingPortal) {
                audioPortal.pause();
                playIconPortal.style.display = 'block';
                pauseIconPortal.style.display = 'none';
            } else {
                audioPortal.play();
                playIconPortal.style.display = 'none';
                pauseIconPortal.style.display = 'block';
            }
            isPlayingPortal = !isPlayingPortal;
            populateTrackList();
        }

        // Floating player elements
        const floatingPlayer = document.getElementById('floatingMusicPlayer');
        const floatingToggle = document.getElementById('floatingToggle');
        const floatingTrack = document.getElementById('floatingTrack');
        const floatingArtist = document.getElementById('floatingArtist');
        const floatingPrev = document.getElementById('floatingPrev');
        const floatingNext = document.getElementById('floatingNext');
        const floatingPlayIcon = document.querySelector('.floating-play-icon');
        const floatingPauseIcon = document.querySelector('.floating-pause-icon');

        function showFloatingPlayer() {
            floatingPlayer.style.display = 'flex';
            localStorage.setItem('musicPlaying', 'true');
            localStorage.setItem('currentTrack', currentTrackIndexPortal);
        }

        function updateFloatingPlayer() {
            floatingTrack.textContent = playlistPortal[currentTrackIndexPortal].title;
            floatingArtist.textContent = playlistPortal[currentTrackIndexPortal].artist;
            if (isPlayingPortal) {
                floatingPlayIcon.style.display = 'none';
                floatingPauseIcon.style.display = 'block';
            } else {
                floatingPlayIcon.style.display = 'block';
                floatingPauseIcon.style.display = 'none';
            }
        }

        function togglePlayPortalUpdated() {
            togglePlayPortal();
            showFloatingPlayer();
            updateFloatingPlayer();
        }

        if (musicTogglePortal) {
            musicTogglePortal.addEventListener('click', () => {
                togglePlayPortal();
                showFloatingPlayer();
                updateFloatingPlayer();
            });
            musicPrevPortal.addEventListener('click', () => {
                loadTrackPortal(currentTrackIndexPortal - 1);
                if (!isPlayingPortal) togglePlayPortal();
                showFloatingPlayer();
                updateFloatingPlayer();
            });
            musicNextPortal.addEventListener('click', () => {
                loadTrackPortal(currentTrackIndexPortal + 1);
                if (!isPlayingPortal) togglePlayPortal();
                showFloatingPlayer();
                updateFloatingPlayer();
            });

            // Floating player controls
            floatingToggle.addEventListener('click', () => {
                togglePlayPortal();
                updateFloatingPlayer();
            });
            floatingPrev.addEventListener('click', () => {
                loadTrackPortal(currentTrackIndexPortal - 1);
                if (!isPlayingPortal) togglePlayPortal();
                updateFloatingPlayer();
            });
            floatingNext.addEventListener('click', () => {
                loadTrackPortal(currentTrackIndexPortal + 1);
                if (!isPlayingPortal) togglePlayPortal();
                updateFloatingPlayer();
            });

            // Auto-advance to next track when current ends
            audioPortal.addEventListener('ended', () => {
                loadTrackPortal(currentTrackIndexPortal + 1);
                updateFloatingPlayer();
            });

            // Initialize
            loadTrackPortal(0);
            populateTrackList();

            // Update PASO requirement UI
            setTimeout(updatePasoRequirementUI, 500);
            setTimeout(updateGazetteRequirementUI, 500);
            setTimeout(updateMotionPrintRequirementUI, 500);
            // Also update when balance might change
            setInterval(updatePasoRequirementUI, 2000);
            setInterval(updateGazetteRequirementUI, 2000);
            setInterval(updateMotionPrintRequirementUI, 2000);

            // Check if music was playing from localStorage (only resume if user has enough PASO)
            const wasPlaying = localStorage.getItem('musicPlaying');
            const savedTrack = localStorage.getItem('currentTrack');
            if (wasPlaying === 'true' && savedTrack !== null && canPlayMusic()) {
                loadTrackPortal(parseInt(savedTrack));
                showFloatingPlayer();
                updateFloatingPlayer();
            }
        }
    </script>
</body>
</html>
